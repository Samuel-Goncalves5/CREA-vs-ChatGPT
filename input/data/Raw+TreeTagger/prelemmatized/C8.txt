Informa=que
Modélisa=on
UML
Objec-fs
séance
Créa-on
site
Web
dynamique
PHP
PHP
•
PHP
langage
programma-on
u=lisé
construc=on
sites
Web
dynamiques
–
Pages
PHP
pages
Web
con=ennent
PHP
•
va
mélanger
PHP
code
HTML
/
CSS
•
code
PHP
va
être
analysé
serveur
•
résultat
va
être
nouvelle
page
Web
mise
jour
automa=quement
code
PHP
coursPHP-1.php
html
…
code
PHP
php
intérieur
balise
date_default_-mezone_set
``
Europe/Paris
php
…
entouré
balise
echo
p
style='font-style
italic
'
Paris
script
language=
php
.date
'd
/
/
'
``
/p
…
/script
…
/html
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
57
PHP
•
Cycle
vie
page
PHP
1
client
envoie
requête
serveur
2
pages
PHP
analysées
serveur
code
PHP
interprété
3
contenu
page
mise
jour
automa-quement
envoyé
client
1
Requête
Fichiers
sta=ques
hUp
//serveur/page.php
HTML
/
CSS
3
Envoie
serveur
contenu
contenu
mis
jour
HTML
calculé
Interpréteur
PHP
Pages
PHP
2
Interpréta-on
serveur
code
PHP
19/01/17
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
58
PHP
…
h1
Bienvenue
site
PHP
/h1
p
style='font-style
italic
'
Paris
28
/
02
/
2012
/p
hUp
//serveur/courPHP-1.php
p
18:45:12
/p
…
Contenu
HTML/CSS
coursPHP-1.php
calculé
…
h1
Bienvenue
site
PHP
/h1
php
date_default_-mezone_set
``
Europe/Paris
Interpréteur
PHP
echo
p
style='font-style
italic
'
Paris
date
'd
/
/
'
``
/p
Page
PHP
originelle
PHP
&
HTML
/
CSS
script
language=
php
echo
p
.date
``
H
i
``
/p
/script
…
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
59
PHP
•
Exemple
code
PHP
coursPHP-2.php
Toute
instruc=on
PHP
DOCTYPE
html
termine
php
date_default_=mezone_set
``
Europe/Paris
Por=on
code
PHP
today
=
date
``
d-m-Y
H
i
php
…
variable
=
PHP5
html
head
…
/head
séquence
/
*
…
*
/
body
délimite
commentaire
h1
Exemple
PHP
/h1
visible
auteur
p
Contenu
staBque
ça
change
/p
invisible
client
php
/
*
contenu
va
être
interprété
serveur
*
/
Por=on
code
P
HP
echo
p
Contenu
variable
/p
echo
p
Aujourd'hui
c'est
today
/p
instruc=on
echo
permet
/body
/html
écrire
document
final
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
60
PHP
•
Code
fois
interprété
serveur…
DOCTYPE
html
html
head
…
/head
body
h1
Exemple
PHP
/h1
p
Contenu
sta=que
ça
change
/p
p
Contenu
PHP5
/p
p
Aujourd'hui
c'est
28-02-2012
19:38:54
/p
/body
/html
Résultat
instruc-ons
echo
client
voit…
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
61
PHP
•
no-on
variable
–
variable
conteneur
valeur
–
peut
affecter
valeur
va
u=liser
plus
tard
variable
=
``
PHP5
indique
variable
=
affecta-on
asribut
valeur
nom
variable
variable
commence
toujours
leere
_
sans
echo
…
variable
…
espace
récupère
valeur
gardée
variable
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
nom
UFR06
Ges=on
62
PHP
•
no-on
variable
types
données
–
variables
peuvent
garder
valeurs
différents
types
•
Nombres
en-ers
integer
25
•
Nombres
décimaux
double
float
2.25
•
Chaînes
caractères
string
1
super
chaîne
•
Logique
boolean
true
1
false
–
fonc=on
geeype
variable
permet
savoir
quel
e
type
valeur
con=ent
variable
•
en=er
=
25
gesype
en=er
è
integer
•
decimal
=
2.25
gesype
decimal
è
double
•
chaine
=
1
super
chaîne
``
gesype
chaine
è
string
•
bool
=
true
gesype
bool
è
boolean
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
63
PHP
•
Exemple
php
Défini-on
enGer
=
25
variable
decimal
=
2.25
chaine
=
1
super
chaîne
``
boolean
=
true
echo
li
geeype
en-er
``
en-er
/li
echo
li
geeype
decimal
``
decimal
/li
echo
li
geeype
chaine
``
chaine
/li
echo
li
geeype
boolean
``
boolean
/li
Valeur
chaque
récupère
geeype
variable
valeur
variable
informe
type
boolean
variable
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
64
PHP
•
Opérateurs
–
Différents
opérateurs
permesent
manipuler
valeurs
variables
Opérateurs
Opérateurs
Opérateurs
Opérateurs
logiques
mathéma-ques
String
comparaison
+
-
*
/
==
=
||
OR
concaténaBon
=
=
&
&
AND
not
php
=
2
3
b
=
4
-
nom
=
Toto
”
echo
Salut
nom
echo
p
4
-
vaut
b
/p
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
65
PHP
•
Tableaux
–
Variables
capables
enregistrer
plusieurs
valeurs
type
•
Tableaux
indice
Aeen-on
définir
toutes
–
Chaque
posi=on
iden=fiée
posi=ons
avant
numéro
commençant
0
u=liser
•
message
erreur
tableau
0
=
•
tableau
1
=
B
•
tableau
3
=
Fin
•
B
Fin
Suite
tableau
=
Suite
•
Tableaux
associa-fs
0
1
2
3
4
–
Chaque
posi=on
reçoit
iden=fiant
label
Jean
Dupont
•
tableauAssoc
``
Prenom
=
Jean
•
Prenom
Nom
tableauAssoc
``
Nom
=
Dupont
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
66
PHP
Message
erreur
car
head
…
contenu
posi=on
2
style
…
/style
tableau
2
/head
défini
auparavant
body
…
h2
Tableaux
indice
/h2
table
php
tableau
0
=
tableau
1
=
B
tableau
3
=
Fin
Contenu
tableau
=
Suite
posi=on
4
tableau
4
echo
tr
td
``
tableau
0
/td
td
``
tableau
1
/td
td
``
tableau
2
/td
td
``
tableau
3
/td
td
``
tableau
4
/td
/tr
``
/table
…
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
67
PHP
…
h2
Tableau
associa=f
/h2
table
tr
th
Nom
/th
th
Prénom
/th
/tr
php
tableauAssoc
``
Prenom
=
Jean
tableauAssoc
``
Nom
=
Dupont
echo
tr
td
tableauAssoc
``
Nom
``
/td
echo
td
tableauAssoc
``
Prenom
/td
/tr
/table
/body
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
68
Informa=que
Modélisa=on
UML
Objec-fs
séance
Classes
&
Objets
PHP
orienté
objets
•
PHP
5
langage
orienté
objets
–
Manipula=on
classes
objets
Défini=on
classe
Visibilité
php
class
Personne
private
nom
class
Personne
{
private
nom
Défini=on
asribut
public
func-on
setNom
nouvNom
Opéra=on
{
this-
nom
=
nouvNom
}
public
func-on
…
Accès
asribut
public
func-on
getNom
{
this-
aeribut
return
this-
nom
}
}
Retourner
valeur
return
valeur
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
70
PHP
orienté
objets
•
Classes
&
Objets
–
Créa=on
objet
obj
=
new
classe
…
Créa=on
objet
php
toto
=
new
Personne
toto
=
new
Personne
Accès
opéra=ons
toto-
setNom
``
Toto
publiques
echo
p
…
``
toto-
getNom
``
/p
toto-
setNom
``
Toto
toto
-
getNom
toto-
nom
=
blablabla
echo
p
toto-
nom
/p
Impossible
accéder
asributs
privés
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
71
PHP
orienté
objets
html
head
…
php
class
Personne
{
private
nom
}
//fin
classe
Personne
/head
body
…
php
toto
=
new
Personne
toto-
setNom
``
Toto
echo
p
Objet
i
Personne
/i
``
toto-
getNom
``
/p
echo
p
toto-
nom
/p
Erreur
car
asribut
nom
privé
/body
/htlml
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
72
PHP
orienté
objets
•
Classes
&
objets
–
Héritage
class
SousClasse
extends
SuperClasse
class
Employe
extends
Personne
{
private
salaire
=
1000
classe
Employe
hérite
classe
Personne
public
func-on
augmentaGon
perc
{
class
Employe
extends
Personne
if
perc
0
{
this-
salaire
=
this-
salaire
this-
salaire
*
perc
rajoute
nouvel
asribut
}
private
salaire
}
nouvel
opéra=ons
public
func-on
getSalaire
public
func-on
augmentaGon
{
return
this-
salaire
}
public
func-on
getSalaire
}
Fichier
Employe.php
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
73
PHP
orienté
objets
•
Classes
&
objets
importe
défini=on
classes
php
Employe
Personne
include
Employe.php
Toto
Employé
toto
=
new
Employe
Personne
toto-
setNom
``
Toto
Toto
possède
salaire
Employe
toto-
augmenta-on
0.10
aussi
nom
Personne
echo
i
nom
/i
toto-
getNom
echo
i
salaire
/i
toto-
getSalaire
``
€
/p
classe
Employe
hérite
tous
aeributs
opéra-ons
Personne
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
74
PHP
orienté
objets
•
Classes
&
objets
html
head
/head
body
h1
Objets
PHP
/h1
php
include
Employe.php
toto
=
new
Employe
toto-
setNom
``
Toto
toto-
augmenta=on
0.10
echo
p
Objet
Employe
/p
ul
echo
li
i
nom
/i
toto-
getNom
``
/li
echo
li
i
salaire
/i
toto-
getSalaire
€
/li
echo
/ul
/body
/html
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
75
PHP
orienté
objets
•
Classes
&
objets
–
Méthode
constructeur
__construct
–
Redéfini-on
opéra=on
class
Manager
extends
Employe
{
private
bonus
func-on
__construct
bon
constructeur
appelé
chaque
{
this-
bonus
=
bon
}
fois
objet
créé
new
public
func-on
getSalaire
{
return
parent
:getSalaire
this-
bonus
}
public
func=on
setBonus
nouvBon
{
…
}
Redéfini=on
opéra=on
getSalaire
public
func=on
getBonus
{
…
}
parent
:getSalaire
correspond
}
opéra=on
getSalaire
définie
super-classe
Employe
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
76
PHP
orienté
objets
•
Classes
&
objets
Appel
constructeur
php
funcBon
__construct
bon
require
Manager.php
{
this-
bonus
=
bon
}
toto
=
new
Manager
400
Appel
opéra=on
getSalaire
toto-
setNom
``
Toto
classe
Manager
toto-
augmenta=on
0.10
echo
p
i
Manager
/i
toto-
getNom
``
salaire
toto-
getSalaire
€
``
bonus
toto-
getBonus
``
/p
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
77
Informa=que
Modélisa=on
UML
Objec-fs
séance
Formulaires
HTML
&
PHP
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
78
PHP
langage
Web
•
Communica-on
entre
client
navigateur
serveur
php
–
formulaires
HTML
permesent
recueil
ir
données
auprès
u=lisateur
•
données
ensuite
communiquées
programme
–
navigateur
envoie
données
récoltées
formulaires
serveur
•
programme
page
PHP
récupère
données
grâce
variables
Page
PHP
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
79
Formulaires
HTML
•
formulaire
HTML
défini
balise
form
…
…
/form
–
Tous
éléments
intérieur
balise
form
name=
nomFormulaire
ac-on=
page.php
method=
get
|
post
…
/form
ac-on
envoie
données
method
comment
envoie
données
–
champs
formulaire
introduits
différents
balises
•
input
type=
…
name=
…
value=
…
id=
…
/
•
textarea
name=
…
id=
…
cols=
…
rows=
…
…
/textarea
•
select
name=
…
id=
…
size=
…
op-on
value=
…
…
/op-on
/select
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
80
Formulaires
HTML
input
type=
text
name=
nomClient
value=
nom
size=
40
maxlength=
150
/
select
name=
produit
op-on
value=
SuperKdo
Super
Kdo
/op-on
…
/select
textarea
name=
opinionClient
cols=
40
rows=
5
opinion
produits
input
type=
reset
value=
Neeoyer
/
/textarea
input
type=
submit
value=
Envoyer
/
input
type=
submit
charge
envoyer
données
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
formulaire
UFR06
Ges=on
81
Formulaires
HTML
form
name=
formClient
ac-on=
coursPHP-7.php
method=
POST
label
for=
nom
Nom
/label
input
type=
text
id=
nom
name=
nomClient
données
value=
nom
size=
40
maxlength=
150
/
br/
envoyées
label
Produit
/label
input
type=
text
select
name=
produit
Zone
saisie
op-on
value=
SuperKdo
Super
Kdo
/op-on
op-on
value=
MegaTruc
Mega
Truc
/op-on
select
…
op-on
op-on
value=
BabyFun
Baby
Fun
/op-on
Liste
sélec=on
/select
br/
op=ons
label
Opinion
/label
textarea
textarea
name=
opinionClient
cols=
40
rows=
5
opinion
produits
/textarea
Zone
texte
br/
input
type=
submit
input
type=
submit
value=
Envoyer
class=
bouton
/
Input
type=
reset
input
type=
reset
value=
Neeoyer
class=
bouton
/
Boutons
envoi
/form
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
reset
formulaire
UFR06
Ges=on
82
Formulaires
HTML
&
PHP
•
données
recueil
ies
formulaire
transmises
programme
indiqué
ac-on=…
•
PHP
récupère
données
grâce
deux
tableaux
associa-fs
spéciaux
–
_GET
è
form
acBon=
…
method=
get
•
_GET
``
nom
input
…
name=
nom
/
–
_POST
è
form
acBon=
…
method=
post
•
_POST
``
nom
input
…
name=
nom
/
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
83
Formulaires
HTML
&
PHP
form
name=
formClient
ac-on=
coursPHP-7.php
method=
POST
label
for=
nom
Nom
/label
input
type=
text
id=
nom
name=
nomClient
value=
nom
size=
40
maxlength=
150
/
br/
…
php
nom
=
_POST
``
nomClient
op
=
_POST
``
opinionClient
prod
=
_POST
``
produit
echo
p
Merci
parBcipaBon
nom
/p
echo
p
produit
i
prod
/i
/p
echo
p
opinion
i
op
/i
/p
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
84
Formulaires
HTML
&
PHP
•
Méthode
GET
–
données
envoyées
URL
programme
–
Limitée
256
octets
form
name=
formGet
–
Déconseillé
ac-on=
coursPHP-8.php
method=
GET
label
Nom
/label
input
type=
text
name=
client
size=
20
/
br/
label
Mot
passe
/label
input
type=
password
name=
mdp
size=
10
/
br/
input
type=
submit
value=
Envoyer
/
/form
php
echo
p
Bienvenue
i
_GET
``
client
``
/i
/p
Man
uele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
85
Formulaires
HTML
&
PHP
form
name=
…
ac-on=
coursPHP-9.php
method=
POST
fieldset
•
Exemple
legend
données
/legend
label
…
/label
input
type=
text
name=
nom
…
/
br/
label
…
/label
input
type=
email
name=
email
…
/
br/
input
type=
radio
name=
sexe
value=
Homme
/
Homme
input
type=
radio
name=
sexe
value=
Femme
/
Femme
br/
/fieldset
fieldset
legend
produits
/legend
label
…
/label
select
name=
produit
op-on
value=
SuperKdo
…
/op-on
op-on
value=
MegaTruc
Mega
Truc
/op-on
op-on
value=
BabyFun
…
/op-on
/select
br/
label
…
/label
textarea
name=
opinion
…
…
/textarea
Manuele
Kirsch
P
/
inhe
fieliro
-
UP
set
1
/
CRI
/
UFR06
Ges=on
86
Formulaires
HTML
&
PHP
body
•
Exemple
h1
Récapitula=f
/h1
ul
php
echo
li
Nom
_POST
``
nom
``
/li
echo
li
Email
_POST
``
email
``
/li
echo
li
Sexe
_POST
``
sexe
``
/li
echo
li
Produit
préféré
_POST
``
produit
``
/li
echo
li
Sugges-on
_POST
``
opinion
``
/li
/ul
/body
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
87
Informa=que
Modélisa=on
UML
Objec-fs
séance
Instruc-ons
contrôle
PHP
Fonc-ons
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
88
PHP
•
Instruc-ons
contrôle
–
Instruc=ons
gérer
flot
exécu=on
–
Instruc-ons
condi-onnelles
•
El
condi=onnent
exécu=on
•
Semblables
nœud
Décision
diagramme
ac=vités
•
if…
else
…
switch
…
case
…
–
Instruc-ons
boucle
•
El
permesent
répé
bloc
instruc=ons
•
for
…
foreach
…
while
…
do…
while
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
89
PHP
•
Instruc-ons
condi-onnelles
if
…
else…
if
condiGon
condi=on
VRAI
{
bloc
instrucGons
vrai
}
Bloc
else
instruc-ons
opGonnel
vrai
{
bloc
instrucGons
faux
}
sinon
Bloc
if
qte
=
100
instruc-ons
{
remise
=
0.10
/
*
remise
10
offerte
*
/
faux
echo
p
remise
10
/p
}
else
{
…
remise
=
0.05
echo
p
remise
5
/p
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
}
UFR06
Ges=on
90
PHP
•
Instruc-ons
condi-onnelles
if
…
else…
–
données
condi=on
peuvent
venir
formulaire
formExemple11.html
php
coursPHP-11.php
form
name=
…
method=
POST
qte
=
_POST
``
qte
ac-on=
coursPHP-11.php
prixunit
=
_POST
``
prix
…
remise
=
0
select
name=
prix
op-on
value=
10
if
qte
=
100
Super
Kdo
-
10€
/op-on
{
remise
=
0.10
/
*
remise
10
offerte
*
/
…
echo
p
remise
10
/p
/select
}
…
input
type=
number
size=
10
prix
=
prixunit
*
qte
name=
qte
/
-
prixunit
*
qte
*
remise
…
echo
p
prix
i
prixunit
/i
input
type=
submit
value=
Devis
/
l'unité
i
qte
/i
unités
/form
régler
i
prix
/i
/p
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
91
PHP
form
name=
…
method=
POST
ac-on=
coursPHP-11.php
label
Produit
/label
php
select
name=
prix
qte
=
_POST
``
qte
op-on
value=
10
Super
…
/op-on
prixunit
=
_POST
``
prix
…
/select
br/
remise
=
0
label
Quan=té
/label
…
input
name=
qte
type=
number
if
qte
=
100
size=
10
/
br/
{
remise
=
0.10
echo
p
…
/p
input
type=
submit
value=
Devis
/
}
/form
…
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
92
PHP
•
Instruc-ons
condi-onnelles
if
…
else…
–
blocs
if…
else
…
peuvent
contenir
importe
quel
e
instruc=on
compris
autres
blocs
if…
else
…
if
condiGon1
{
bloc
instrucGons
condiGon1
vraie
}
elseif
condi-on2
{
bloc
instrucGons
condiGon2
vraie
}
else
{
bloc
instrucGons
condiGons
fausses
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
93
PHP
php
qte
=
_POST
``
qte
prixunit
=
_POST
``
prix
if
qte
=
100
{
remise
=
0.10
}
form
name=
…
method=
POST
elseif
qte
=
50
ac-on=
coursPHP-12.php
{
remise
=
0.05
}
…
select
name=
prix
…
/select
else
…
{
remise
=
0
}
input
type=
number
…
name=
qte
/
…
prix
=
prixunit
*
qte
input
type=
submit
value=
Devis
/
-
prixunit
*
qte
*
remise
/form
echo
p
Prix
unitaire
i
prixunit
/i
QuanBté
i
qte
/i
Remise
i
remise
*
100
``
/i
/p
echo
``
p
i
Total
régler
/i
b
prix
/b
/p
Manuele
Kirsch
Pi
heiro
-
UP1
/
CRI
/
UFR06
Ges=on
94
PHP
•
Instruc-ons
boucle
for
–
boucle
for
permet
répéter
certain
nombre
fois
exécu=on
bloc
instruc=ons
for
iniGalisaGon
condiGon
incrémentaGon
{
bloc
instrucGons
répéter
}
i
=
6
i
=
1
echo
…
i++
else
suite…
for
i
=
1
i
=
6
i++
{
echo
h
i
Titre
niveau
i
/h
i
i++
è
i
=
i
1
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
95
PHP
•
Instruc-ons
boucle
for
php
for
i
=
1
i
=
6
i++
{
echo
h
i
Titre
niveau
i
/h
i
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
96
PHP
•
Instruc-ons
boucle
while
–
boucle
while
permet
con=nuer
réaliser
bloc
opéra=ons
tant
condi-on
vraie
i
=
6
i
=
1
echo
…
i
=
i
1
else
suite…
i
=
1
while
i
=
6
{
echo
h
i
Titre
niveau
i
/h
i
i
=
i
1
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
97
PHP
•
Instruc-ons
boucle
while
donne
valeur
ini-ale
variable
i
php
i
=
1
Tant
i
dépasse
while
i
=
6
{
valeur
6
echo
h
i
Titre
niveau
i
/h
i
i
=
i
1
}
met
jour
valeur
variable
i
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
98
PHP
•
Instruc-ons
boucle
foreach
–
boucle
foreach
permet
répéter
bloc
instruc=ons
chaque
valeur
tableau
reste-t-il
-tre
reçoit
tableau
valeur
prochaine
valeur
echo
…
plus
valeur
tableau
suite…
foreach
tableau
-tre
{
echo
-tre
Titre
-tre
/
-tre
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
99
PHP
•
Instruc-ons
boucle
foreach
php
définit
tableau
tableau
=
array
``
h1
h2
h3
h4
h5
h6
foreach
tableau
-tre
{
echo
-tre
Titre
-tre
chaque
valeur
/
-tre
tableau
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
100
PHP
•
Instruc-ons
boucle
foreach
–
ça
fonc=onne
aussi
tableaux
associa=fs
définit
tableau
associa=f
clé
=
valeur
php
tableau
=
array
``
nom
=
Dupont
prenom
=
Jean
adresse
=
qq
part
Paris
chaque
pair
foreach
tableau
cle=
valeur
{
clé
=
valeur
echo
li
cle
valeur
/li
tableau
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
101
PHP
•
Instruc-ons
boucle
boucles
imbriquées
–
possible
imbriquer
boucles
unes
autres
table
php
for
lin
=
1
lin
=
9
lin++
{
echo
tr
”
for
col
=
1
col
=
9
col++
{
echo
td
col
*
lin
/td
}
echo
/tr
}
/table
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
102
PHP
•
Fonc-ons
–
PHP
offre
large
panoplie
fonc=ons
•
Exemple
isset
var
TRUE
var
connue
•
Exemple
empty
var
TRUE
var
vide
vaut
0
–
peut
aussi
écrire
nôtres
dehors
classes
•
func-on
nomFonc-on
paramètre
…
{
instruc-ons
}
func-on
saluta-on
nom
{
echo
h1
Bienvenue
nom
/h1
echo
p
class=droite
Aujourd'hui
.date
'd
/
/
'
``
/p
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
103
php
PHP
…
func-on
saluta-on
nom
{
form
name=
…
method=
POST
date_default_-mezone_set
``
Europe/Paris
ac-on=
coursPHP-15.php
label
Nom
/label
echo
h1
Bienvenue
nom
/h1
input
type=
text
name=
client
echo
p
class=droite
Aujourd'hui…
size=
25
/
date
'd
/
/
'
``
/p
…
}
input
type=
submit
value=
OK
/
/form
if
isset
_POST
``
client
AND
empty
_POST
``
client
{
saluta-on
_POST
``
client
}
else
{
saluta-on
``
cher
client
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
104
PHP
•
Importa-on
fichiers
•
Incorporer
contenu
fichier
page
PHP
•
But
réu=lisa=on
fichiers
uniformisa=on
site
–
include
fichier
include_once
fichier
•
include
remplace
ligne
contenu
fichier
•
include_once
fait
ça
seule
fois
boucle
–
require
fichier
require_once
fichier
•
idem
include
fichier
existe
erreur
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
105
PHP
meta
charset=
UTF-8
/
head
php
…
include_once
head.html
=tle
site
/=tle
require
mesfonc-ons.php
link
rel=
stylesheet
/head
body
href=
css/blocs.css
/
php
include_once
headerNav.html
…
header
h1
site
/h1
php
/header
nav
saluta-on
``
cher
client
h2
Exemples
/h2
ul
ar=cle
php
li
…
/li
h2
News
/h2
func-on
saluta-on
nom
{
…
p
…
/p
echo
p
class=droite
b
Bienvenue
/ul
/ar=cle
nom
/b
/p
/nav
…
echo
p
class=droite
Aujourd'hui
.date
'd
/
/
'
``
/p
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
106
PHP
include_once
head.html
head
…
-tle
site
/-tle
link
rel=
stylesheet
href=
css/blocs.css
/
/head
body
header
h1
site
/h1
/header
nav
h2
Exemples
/h2
include_once
headerNav.html
ul
li
…
/li
…
/ul
require
mesfonc-ons.php
/nav
saluta-on
``
cher
client
sec=on
p
class=droite
b
Bienvenue
cher
client
/b
/p
p
class=droite
Aujourd'hui
22/
03
/
2014
/p
…
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
107
Informa=que
Modélisa=on
UML
Objec-fs
séance
PHP
&
bases
données
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
108
PHP
•
Accès
bases
données
par-r
PHP
–
PHP-MySQL
très
u=lisés
sites
Web
–
Différents
bibliothèques
disponibles
•
mysqli
PDO
•
Etapes
u-liser
base
données
1
connexion
serveur
MySQL
2
envoi
requêtes
SQL
select
insert
into…
3
récupéra=on
résultats
4
fermeture
connexion
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
109
PHP
•
Connexion
serveur
MySQL
travers
mysqli
–
Toute
communica=on
BdD
passe
objet
classe
mysqli
–
connexion
effectue
créa-on
objet
new
idcon
=
new
mysqli
host
user
mdp
bdd
obj
nom
serveur
base
données
idenBfiant
connexion
mot
passe
uBlisateur
autorisé
accéder
base
•
Toute
connexion
ouverte
doit
être
fermée
bool
=
idcon-
close
demande
objet
mysqli
fermer
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
connexion
UFR06
Ges=on
110
PHP
php
host
=
localhost
user
=
root
Astuce
placer
informa=ons
fichier
mdp
=
root
faire
require
include
fichier
bdd
=
clientsBD
Créa=on
objet
mysqli
=
new
mysqli
host
user
mdp
bdd
connexion
if
mysqli-
connect_errno
{
asribut
connect_errno
die
``
p
Impossible
connecter
bdd
indique
connexion
mysqli-
connect_error
/p
bien
établie
}
else
{
cas
problème
echo
p
Connecté
serveur
host
arrête
base
bdd
/p
fonc=on
die
mysqli-
close
}
Fermeture
connexion
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
111
PHP
•
Envoie
requêtes
base
données
result
=
mysqli-
query
sql
Résultat
requête
exécuBon
requête
Requête
SQL
objet
connexion
exécuter
–
Requête
SQL
•
agit
SELECT
résultat
correspond
données
fournies
requête
objet
mysqli_result
•
Sinon
INSERT
UPDATE
DELETE…
résultat
TRUE
requête
bien
exécutée
FALSE
sinon
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
112
form
name=
formNouveauClient
PHP
ac-on=
coursPHP-18.php
method=
POST
input
type=
text
name=
nom
/
input
type=
text
name=
email
/
input
type=
submit
value=
Envoyer
/
/form
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
113
coursPHP-18.php
php
if
empty
_POST
``
nom
AND
empty
_POST
P
e
HP
mail
{
require
connexion.php
mysqli
=
connexion
connexion.php
php
nom
=
_POST
``
nom
func-on
connexion
{
email
=
_POST
``
email
host
=
localhost
adr
=
_POST
``
adresse
user
=
uml
id
=
'\N
'
/
*
auto-increment
*
/
mdp
=
uml
bdd
=
clientsBD
sql
=
INSERT
INTO
client
id
nom
email
adresse
VALUES
'
id
'
'
nom
'
'
email
'
'
adr
'
mysqli
=
new
mysqli
host
user
mdp
bdd
result
=
mysqli-
query
sql
if
mysqli-
connect_errno
{
if
result
{
echo
p
Désolée
…
/p
}
die
``
p
Impossible
…
else
{
mysqli-
connect_error
``
/p
echo
p
client
numéro
i
}
mysqli-
insert_id
``
/i
/p
return
mysqli
}
}
mysqli-
close
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
…
UFR06
Ges=on
114
PHP
•
Récupéra-on
données
result
=
mysqli-
query
``
SELECT
*
FROM
table
–
requêtes
SELECT
fournissent
données
–
récupère
résultat
ligne
ligne
aide
opéra=ons
fetch_
*
–
Chaque
appel
fetch_
*
retourne
prochaine
ligne
•
Ligne
tableau
indice
result-
fetch_row
•
Ligne
tableau
associa=f
result-
fetch_assoc
•
Ligne
objet
result-
fetch_object
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
115
connexion.php
php
coursPHP-19.php
PHP
php
func-on
connexion
{
require
connexion.php
mysqli
=
connexion
mysqli
=
new
mysqli
host
user
mdp
bdd
sql
=
SELECT
id
nom
email
adresse
return
mysqli
FROM
client
ORDER
BY
nom
}
result
=
mysqli-
query
sql
exécute
requête
if
result
{
echo
p
Desolée
…
/p
}
opéra=on
mysqli-
query
else
{
while
ligne
=
result-
fetch_object
{
opéra=on
result-
fetch_object
récupère
prochaine
ligne
echo
td
ligne-
id
``
/td
FAUX
reste
plus
lignes
echo
td
ligne-
nom
``
/td
echo
td
ligne-
email
``
/td
Chaque
aeribut
requête
echo
td
ligne-
adresse
``
/td
devient
aeribut
objet
ligne
}
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
116
PHP
requête
récupéra-on
informa-ons
•
…
tableau
indice
•
…
tableau
associa=f
sql
=
SELECT
id
nom
email
adresse
sql
=
SELECT
id
nom
email
adresse
FROM
client
ORDER
BY
nom
FROM
client
ORDER
BY
nom
result
=
mysqli-
query
sql
result
=
mysqli-
query
sql
while
ligne
=
result-
fetch_row
{
while
ligne
=
result-
fetch_assoc
{
echo
td
ligne
0
``
/td
echo
td
ligne
'id
'
``
/td
echo
td
ligne
1
``
/td
echo
td
ligne
'nom
'
``
/td
echo
td
ligne
2
``
/td
echo
td
ligne
'email
'
``
/td
echo
td
ligne
3
``
/td
echo
td
ligne
'adresse
'
``
td
}
}
ça
commence
toujours
0
chaque
asribut
accessible
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
nom
UFR06
Ges=on
117
PHP
•
Autres
informa=ons
peuvent
être
récupérées
objet
mysqli_result
result
=
mysqli-
query
…
–
Combien
lignes
colonnes
peut
récupérer
•
nblignes
=
result-
num_rows
•
nbcol
=
result-
field_count
–
noms
colonnes
aeributs
résultat
•
colonnes
=
result-
fetch_fields
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
118
PHP
par=r
objet
result
peut
sql
=
SELECT
id
nom
email
adresse
récupérer
nombre
lignes
FROM
client
ORDER
BY
nom
asribut
num_rows
colonnes
result
=
mysqli-
query
sql
ligne
asribut
field_count
echo
p
result-
num_rows
``
clients
/p
echo
p
result-
field_count
asributs
client
/p
peut
aussi
récupérer
-tres
=
result-
fetch_fields
colonnes
Chaque
colonne
foreach
-tres
colonne
{
objet
asribut
name
donne
echo
th
colonne-
name
/th
nom.
}
while
ligne
=
result-
fetch_object
{
ligne
aussi
objet
echo
tr
aeributs
correspondent
foreach
ligne
colonne=
val
{
colonnes
peut
u=liser
echo
td
val
``
/td
foreach
accéder
valeur
}
echo
/tr
aeributs
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR0
}
6
Ges=on
119
Informa=que
Modélisa=on
UML
Objec-fs
séance
Mécanismes
sessions
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
120
PHP
•
Mécanisme
sessions
–
Chaque
visite
site
/
page
indépendante
–
sessions
permesent
conserver
informa=ons
visiteurs
entre
pages
–
informa=ons
sessions
stockées
serveur
•
Fonc=onnement
général
1
Ouverture
session
session_start
•
Chaque
u=lisateur
reçoit
iden=fiant
transmis
entre
pages
2
Défini=on
variables
sessions
données
•
variables
session
transmises
page
page
•
_SESSION
``
variable
=
valeur
3
Fermeture
session
session_destroy
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
121
PHP
Login
&
mdp
différents
uml
Login
&
mdp
corrects
uml
/uml
form
name=
…
ac-on=
coursPHP-23.php
method=
POST
label
Login
/label
input
type=
text
name=
login
maxlength=
15
/
br/
label
Mot
passe
/label
input
type=
password
name=
mdp
maxlength=
15
/
br/
input
type=
submit
value=
OK
/
/form
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
122
PHP
php
session_start
Ouverture
session
html
début
chaque
page
head
…
/head
body
php
login
=
_POST
``
login
Défini=on
variables
session
mdp
=
_POST
``
mdp
_SESSION
``
var
if
login
==
uml
AND
mdp
==
uml
{
_SESSION
``
login
=
login
…
echo
h1
Bienvenue
cher
login
/h1
variables
}
session
con=ennent
else
{
echo
h1
Desolé
/h1
informa=ons
echo
p
Page
accessible
uniquement
membres
/p
passeront
page
}
page
/body
/html
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
123
PHP
php
session_start
html
head
…
/head
body
php
if
isset
_SESSION
``
login
AND
empty
_SESSION
``
login
{
login
=
_SESSION
``
login
…
Usage
variables
session
echo
p
Client
b
login
/b
Ceci
page
_Ss
Eab
SSoIn
Oné
/
v
p
ar
}
else
{
echo
h1
Desolé
/h1
echo
p
s'agit
d'une
page
privée
faut
être
membre
/p
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
…
UFR06
Ges=on
124
PHP
php
session_start
html
head
…
/head
body
php
if
isset
_SESSION
``
login
AND
empty
_SESSION
``
login
{
…
unset
_SESSION
``
login
Fermeture
session
session_destroy
session_destroy
}
else
{
echo
h1
Desolé
/h1
echo
p
connexion
ac=ve
/p
oublier
vider
}
variables
session
…
unset
_SESSION
var
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
125
PHP
•
Mécanisme
sessions
–
Base
ges=on
panier
sites
e-commerce
–
produits
choisis
client
enregistrés
tant
variables
session
–
peut
garder
objets
SIMPLES
class
LigneProduit
{
public
nom
public
qte
Contenu
panier
gardé
variables
session
/
*
constructeur
*
/
Tableau
contenant
objets
func-on
__construct
nom
{
LigneProduit
this-
nom
=
nom
Chaque
_SESSION
produit
this-
qte
=
1
con=ent
objet.
}
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
126
PHP
Chaque
produit
choisi
iden=fié
func-on
ajouterProduit
produit
{
id
ici
nom
qte
=
0
_SESSION
produit
va
contenir
objet
LigneProduit
if
isset
_SESSION
produit
{
_SESSION
produit
=
new
LigneProduit
produit
qte
=
_SESSION
produit
-
qte
}
aucun
_SESSION
produit
else
{
//
produit
déjà
là
augmenter
alors
quan=té
va
créer
nouveau
objet
objet
=
_SESSION
produit
LigneProduit
objet-
qte
=
objet-
qte
1
qte
=
objet-
qte
déjà
}
_SESSION
produit
return
qte
va
juste
augmenter
valeur
}
asribut
qte
objet
LigneProduit
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
127
PHP
Lorsqu
veut
supprimer
func-on
supprimerProduit
produit
{
produit
va
réduire
quan=té
qte
=
0
objet
LigneProduit
if
isset
_SESSION
produit
{
récupère
objet
objet
=
_SESSION
produit
LigneProduit
gardé
objet-
qte
=
objet-
qte
-
1
_SESSION
produit
qte
=
objet-
qte
réduit
quan=té
unité
if
qte
=
0
{
//on
supprime
produit
unset
_SESSION
produit
}
}
reste
plus
quan-té
aseint
0
unités
supprime
return
qte
produit
session
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
128
PHP
peut
récupérer
contenu
panier
récupérant
contenu
variable
session
_SESSION
chaque
objet
LigneProduit
gardé
func-on
afficherPanier
{
_SESSION
echo
table
foreach
_SESSION
objet
{
echo
tr
td
objet-
nom
``
/td
td
objet-
qte
/td
/tr
}
echo
/table
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
129
PHP
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
130
PHP
Panier
avancé
•
Voici
exemple
avancé
Panier
u=lise
classes
PHP
no=on
session
•
panier
modélisé
classe
Panier
Panier
+
nbProduits
int
Produit
lignes
+
ajouterProduit
code
nom
prix
+
code
String
+
supprimerProduit
code
*
+
nom
String
+
calculerTotal
float
+
prix
float
+
getNbProduits
int
LignePanier
php
php
+
qte
int
class
Produit
{
class
LignePanier
{
public
code
public
prod
public
nom
public
qte
public
prix
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
}
UFR06
Ges=on
131
PHP
Panier
avancé
class
Panier
{
Chaque
Ligne
Panier
gardée
public
lignes
tableau
associa=f
public
nbProduits
this-
lignes
code
=
LignePanier
func=on
__construct
{
commence
zéro
produits
this-
nbProduits
=
0
panier
}
va
créer
tableau
func-on
ajouterProduit
code
nom
prix
{
lors
ajout
…
if
this-
nbProduits
==
0
{
premier
produit
prod
=
new
Produit
code
nom
prix
panier
lp
=
new
LignePanier
prod
this-
lignes
code
=
lp
this-
nbProduits
=
1
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
132
PHP
Panier
avancé
func-on
ajouterProduit
code
nom
prix
{
if
this-
nbProduits
==
0
{
}
ajouter
vérifie
else
{
produit
déjà
panier
if
isset
this-
lignes
code
{
lp
=
this-
lignes
code
qte
=
lp-
qte
récupère
lp-
qte
=
qte
1
met
jours
quan-té
}
else
{
prod
=
new
Produit
code
nom
prix
lp
=
new
LignePanier
prod
va
ajouter
nouvelle
ligne
panier
this-
lignes
code
=
lp
this-
nbProduits
=
this-
nbProduits
1
}
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
133
PHP
Panier
avancé
func-on
ajouterProduit
code
nom
prix
{
supprime
if
isset
this-
lignes
code
{
produit
panier
lp
=
this-
lignes
code
met
jour
quan=té
lp-
qte
=
lp-
qte
-
1
supprimant
1
unité
if
lp-
qte
1
{
contre
reste
plus
rien
unset
this-
lignes
code
qte
1
supprime
ligne
this-
nbProduits
=
this-
nbProduits
-
1
panier
tableau
}
}
}
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
134
PHP
Panier
avancé
•
objet
Panier
site
va
manipuler
•
page
ctlPanier.php
va
ainsi
gérer
panier
•
cela
el
e
va
devoir
garder
objet
Panier
_SESSION
ctlPanier
Panier
+
_SESSION
+
nbProduits
int
+
ajouterProduit
code
nom
prix
int
+
ajouterProduit
code
nom
prix
+
supprimerProduit
code
int
+
supprimerProduit
code
+
afficherPanier
+
calculerTotal
float
+
terminerSession
+
getNbProduits
int
php
session_start
include
Panier.php
html
Man
u
/ele
Kir
htmslch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
135
PHP
Panier
avancé
•
Or
objet
Panier
objet
complexe
•
garder
_SESSION
va
falloir
compacter
sérialisa-on
–
_SESSION
``
panier
=
serialize
panier
–
unserialize
_SESSION
``
panier
func-on
ajouterProduit
produit
nom
prix
{
ajouter
supprimer
produit
panier
va
panier
=
unserialize
_SESSION
``
panier
récupérer
modifier
puis
panier-
ajouterProduit
produit
nom
prix
remeere
session
_SESSION
``
panier
=
serialize
panier
func-on
supprimerProduit
produit
{
panier
=
unserialize
_SESSION
``
panier
panier-
supprimerProduit
produit
_SESSION
``
panier
=
serialize
panier
Manuele
Kirsch
Pinheiro
-
UP1
/
CRI
/
UFR06
Ges=on
136
