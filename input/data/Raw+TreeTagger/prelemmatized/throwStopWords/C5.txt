Cours
PHP
Accéléré
Version
Gérard
Rozsavolgyi
septembre
Table
des
matières
Ce
cours
au
format
epub
Ce
cours
au
format
pdf
Tables
des
matières
Caractéristiques
Principales
Fonctionnement
Historique
Installation
PHP
Configuration
PHP
Exemples
simples
Imbrication
de
code
HTML
et
PHP
Un
formulaire
HTML
et
sa
réponse
en
PHP
Les
variables
en
PHP
Les
chaînes
en
PHP
Le
typage
en
PHP
Quelques
particularités
de
PHP
Les
tableaux
en
PHP
Les
tableaux
prédéfinis
de
PHP
L
inclusion
de
fichiers
externes
Les
Objets
en
PHP
Les
collections
en
PHP
Connexion
aux
bases
de
données
depuis
PHP
Requêtes
préparées
en
PHP
Compléments
sur
PDO
Sécurité
Filtrage
en
PHP
Gestion
des
transactions
avec
PDO
Connexion
persistante
avec
PDO
Validation
et
contrôle
d
entrées
avec
GUMP
Http
et
la
conservation
d
informations
sur
les
clients
Manipuler
XML
avec
PHP
Architecture
de
type
MVC
avec
PHP
Templates
Twig
en
PHP
i
Composer
Symfony
et
Flex
Tester
une
application
PHP
TDD
Mettre
en
place
un
Web
Service
REST
Exemple
de
service
REST
avec
PHP
Tester
une
API
REST
avec
votre
navigateur
ou
avec
curl
Tester
une
API
Feuilles
de
TD
Lic
Pro
Web
et
Mobile
Feuilles
de
TD
ème
Année
IUT
informatique
Feuilles
de
TD
Lic
Pro
Web
et
Mobile
Feuilles
de
TD
CVRH
Tours
Alice
démarre
avec
git
Bob
travaille
avec
Alice
grâce
à
git
Alice
se
met
à
jour
Alice
travaille
sur
une
branche
git
Bob
et
la
branche
d
Alice
Alice
récupère
la
dernière
version
du
master
GIT
Références
Index
et
recherche
Index
ii
CHAPITRE
Ce
cours
au
format
epub
PHP
en
accéléré
format
epub
Cours
PHP
Accéléré
Version
Chapitre
Ce
cours
au
format
epub
CHAPITRE
Ce
cours
au
format
pdf
PHP
en
accéléré
en
pdf
Cours
PHP
Accéléré
Version
Chapitre
Ce
cours
au
format
pdf
CHAPITRE
Tables
des
matières
Caractéristiques
Principales
Langage
interprété
—
Pas
de
compilation
—
Exécuté
instruction
par
instruction
—
Multi
plateformes
—
Compilateur
AOT
ByteCode
en
PHP
Zend
—
Compilateur
JIT
pour
HHVM
Facebook
—
Langage
Hack
proposé
par
Facebook
Spécialisé
dans
la
génération
de
texte
ou
de
documents
—
HTML
—
PDF
—
Images
Fichiers
d
extension
php
—
Code
inséré
dans
une
page
HTML
—
Entre
balises
php
et
Cours
PHP
Accéléré
Version
Fonctionnement
L
interpréteur
lit
un
fichier
source
php
puis
génère
un
flux
de
sortie
avec
les
règles
suivantes
—
toute
ligne
située
à
l
extérieur
d
un
bloc
PHP
entre
php
et
est
recopiée
inchangée
dans
le
flux
de
sortie
—
le
code
PHP
est
interprété
et
génère
éventuellement
des
résultats
intégrés
eux
aussi
au
flux
de
sortie
—
les
erreurs
éventuelles
donnent
lieu
à
des
messages
d
erreurs
qu
on
retrouve
également
dans
le
flux
de
sortie
selon
la
configuration
du
serveur
—
une
page
html
pure
sauvegardée
avec
l
extension
php
sera
donc
non
modifiée
et
ren
voyée
telle
quelle
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Historique
Créateur
Rasmus
Lerdorf
un
programmeur
Groenlandais
avec
la
nationalité
canadienne
crée
PHP
en
pour
analyser
les
connexions
sur
son
site
Web
Il
réalise
les
premières
moutures
du
langage
v
et
v
En
deux
étudiants
Andi
Gutmans
et
Zeev
Suraski
reprennent
le
moteur
il
en
sortira
PHP
puis
les
outils
Zend
Note
Le
langage
PHP
a
subi
de
profonds
remaniements
et
a
bénéficié
de
beaucoup
d
enrichis
sements
depuis
ces
premières
versions
La
première
version
objet
de
PHP
la
version
a
été
profondément
remaniée
lors
du
passage
de
PHP
à
PHP
et
s
inspire
désormais
largement
du
modèle
de
Java
La
version
actuelle
de
PHP
est
la
sortie
en
La
version
est
sortie
en
Décembre
et
il
n
y
a
jamais
eu
de
version
PHP
https
wiki
php
net
rfc
php
timeline
Avertissement
Le
début
du
développement
de
la
version
de
PHP
date
de
et
a
été
abandonnée
en
raison
de
difficultés
d
intégration
du
support
Unicode
Les
autres
fonctionnalités
envisagées
ont
depuis
été
intégrées
à
PHP
ou
Ca
n
a
pas
empêché
un
certain
nombre
de
livres
intitulés
PHP
de
sortir
bien
que
cette
version
n
existera
jamais
La
saga
PHP
—
Facebook
a
publié
en
HipHop
Virtual
Machine
dit
HHVM
une
machine
virtuelle
permettant
de
pré
compiler
le
code
PHP
en
bytecode
à
la
manière
de
Java
JIT
Compi
ler
—
En
Facebook
sort
le
langage
Hack
s
exécutant
grace
à
HHVM
et
apportant
des
fonctionnalités
comme
le
typage
fort
des
classes
paramétrables
une
API
de
collec
tions
plus
riche
et
cohérente
des
traitements
asynchrones
et
davantage
de
sécurité
avec
l
extension
XHP
—
Le
framework
PHP
Phalcon
extension
PECL
de
PHP
propose
Zephir
Zend
Engine
PHp
Intermediate
https
github
com
phalcon
zephir
qui
permet
la
création
d
extensions
rapides
en
PHP
codées
en
C
de
manière
simplifiée
sans
écrire
du
C
directe
ment
—
La
société
Zend
a
réagi
face
à
HHVM
en
accélérant
le
développement
de
la
nouvelle
mouture
de
PHP
et
en
améliorant
ses
performances
avec
un
mécanisme
de
compilation
AOT
Ahead
of
Time
PHP
Signifie
d
abord
Personal
Home
Pages
puis
HypertextPreProcessor
Historique
Cours
PHP
Accéléré
Version
Syntaxe
et
structure
—
Proche
du
C
ou
du
Perl
—
Peu
structuré
au
début
—
Possibilité
de
définir
des
fonctions
et
des
classes
—
Très
bonnes
performances
pour
PHP
améliorations
de
l
ordre
de
de
la
vitesse
d
exécution
Utilisation
—
Grand
succès
—
Utilisation
par
de
très
grands
sites
—
beaucoup
de
code
libre
disponible
—
des
dizaines
de
millions
de
sites
Web
l
utilisent
à
travers
le
monde
—
Comme
Le
Monde
http
lemonde
fr
Facebook
http
facebook
fr
ou
Yahoo
http
yahoo
fr
CMS
Les
grands
CMS
Content
Management
Systems
ou
Systèmes
de
Gestion
de
Contenus
utilisent
PHP
comme
—
Wordpress
—
Joomla
—
Drupal
Les
CMS
de
ecommerce
aussi
—
Prestashop
—
Magento
Frameworks
De
grands
Frameworks
de
développement
Web
aussi
sont
disponibles
en
PHP
—
Symfony
—
Zend
—
Laravel
—
Phalcon
—
CakePHP
—
Yii
—
Slim
Note
Plus
de
millions
de
sites
sont
réalisés
en
PHP
à
travers
le
monde
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Installation
PHP
Indication
Tout
informaticien
doit
savoir
ce
que
LAMP
veut
dire
LAMP
—
Linux
—
Apache
—
MySQL
—
PHP
Par
exension
le
logiciel
équivalent
pour
Windows
s
est
retrouvé
nommé
WAMP
Pour
Windows
Et
MAMP
pour
les
Macs
MAMP
Pour
Mac
Pas
indispensable
car
Apache
et
PHP
sont
installés
sur
Mac
OS
xx
mais
un
peu
plus
simple
à
configurer
Il
vous
faudra
alors
installer
MySQL
soit
dans
un
paquet
soit
en
utilisant
homebrew
ou
macports
Pour
toutes
les
plate
formes
on
peut
aussi
installer
XAMPP
https
www
apachefriends
org
fr
index
html
Revenons
à
l
OS
de
référence
à
présent
Sous
Linux
—
Installer
Apache
—
Installer
PHP
—
Télécharger
éventuellement
la
documentation
paquet
php
doc
—
Vérifier
le
fichier
php
ini
—
Installer
MySQL
client
et
serveur
—
Installer
PHPMyAdmin
—
Installer
des
paquets
complémentaires
dont
les
noms
commencent
par
php
Installation
PHP
Cours
PHP
Accéléré
Version
Configuration
PHP
Le
fichier
PHP
ini
Le
fichier
PHP
ini
contient
toutes
les
directives
essentielles
de
réglage
—
Taille
des
fichiers
téléchargeables
—
Safe
Mode
—
Affichage
et
traitement
des
erreurs
—
Communication
avec
MySQL
Danger
Attention
les
directives
de
ce
fichier
sont
très
importantes
pour
la
sécurité
d
un
serveur
en
production
Il
faudra
y
veiller
et
les
vérifier
minutieusement
dans
ce
cas
Sous
certaines
distributions
de
Linux
il
existe
versions
de
ce
fichier
une
de
developpement
et
une
autre
pour
un
serveur
de
production
N
oubliez
pas
d
activer
la
bonne
version
selon
le
contexte
et
de
la
vérifier
en
tous
les
cas
Les
directives
principales
PHP
ini
Ces
directives
sont
très
nombreuses
J
ai
retenu
les
plus
importantes
dans
le
fichier
suivant
en
commentant
leur
rôle
PHP
About
php
ini
Fichier
de
configuration
principal
de
PHP
qui
permet
de
préciser
les
principales
options
Sous
certaines
distributions
Linux
il
en
existe
versions
une
de
developpement
et
une
autre
pour
un
serveur
de
production
Language
Options
Pour
activer
PHP
engine
On
On
peut
mettre
à
faux
les
tags
ne
sont
pas
reconnus
short
open
tag
Off
Allow
ASP
style
tags
http
php
net
asp
tags
asp
tags
Off
The
number
of
significant
digits
displayed
in
floating
point
numbers
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
http
php
net
precision
precision
Compatibilité
an
y
k
compliance
On
Taille
des
buffers
output
buffering
Pour
servir
ou
pas
des
pages
compressées
zlib
output
compression
Off
Mettre
à
On
pour
forcer
les
flush
en
phase
de
debuggage
implicit
flush
Off
Safe
Mode
http
php
net
safe
mode
On
peut
le
laisser
désactivé
car
a
été
déclaré
OBSOLETE
depuis
PHP
Safe
mode
Off
Pour
désactiver
certaines
fonctions
PHP
indépendant
du
safe
mode
http
php
net
disable
functions
disable
functions
meme
chose
avec
des
classes
disable
classes
Colors
for
Syntax
Highlighting
mode
A
utiliser
avec
la
fonction
highlight
file
show
source
Highlight
string
DD
highlight
comment
FF
highlight
keyword
highlight
bg
FFFFFF
highlight
default
BB
highlight
html
Miscellaneous
On
peut
l
enlever
sur
un
serveur
de
production
mais
n
est
pas
une
menace
de
sécurité
expose
php
On
suite
sur
la
page
suivante
Configuration
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Resource
Limits
Temps
d
éxécution
max
d
un
script
Attention
si
vous
avez
du
code
un
peu
long
à
s
éxécuter
max
execution
time
Traitement
des
données
reçues
laisser
la
valeur
par
défaut
max
input
time
Taille
mémoire
maxi
donnée
à
un
script
PHP
memory
limit
M
Error
handling
and
logging
Pour
un
serveur
de
Production
E
ALL
E
DEPRECATED
Pour
un
serveur
de
développement
error
reporting
E
ALL
E
STRICT
Affichage
des
erreurs
sur
la
sortie
standard
cad
sur
le
navigateur
A
désactiver
sur
un
serveur
de
production
Utile
pour
un
développeur
display
errors
On
Affichage
des
erreurs
au
démarrage
de
PHP
Pour
débugger
des
erreurs
sur
des
plugins
ou
des
modules
complémentaires
de
PHP
display
startup
errors
Off
logger
les
erreurs
A
activer
log
errors
On
Set
maximum
length
of
log
errors
In
error
log
information
about
the
source
is
added
The
default
is
and
allows
to
not
apply
any
maximum
length
at
all
http
php
net
log
errors
max
len
log
errors
max
len
Ne
pas
répéter
les
erreurs
identiques
ignore
repeated
errors
On
sauf
si
elles
proviennent
de
fichiers
différents
ignore
repeated
source
Off
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Rapporter
les
fuites
de
mémoire
A
activer
en
phase
de
dévelopement
report
memleaks
On
La
variable
php
errormsg
contiendra
le
texte
du
dernier
message
d
erreur
A
désactiver
sur
un
serveur
de
production
track
errors
On
http
php
net
html
errors
html
errors
On
A
faire
pointer
sur
une
copie
locale
de
la
documentation
de
PHP
A
désactiver
sur
un
serveur
de
production
docref
root
docs
php
Extension
des
fichiers
de
documentation
docref
ext
html
Chaine
à
afficher
avant
un
message
d
erreur
Ici
pour
qu
il
s
affiche
en
rouge
Réservé
aux
serveurs
de
dévelopement
error
prepend
string
font
color
ff
Fermeture
du
tag
précédent
error
append
string
font
Pour
changer
le
fichier
où
sont
logguées
les
erreurs
Laisser
inchangé
sauf
cas
particulier
error
log
syslog
Data
Handling
The
separator
used
in
PHP
generated
URLs
to
separate
arguments
PHP
s
default
setting
is
http
php
net
arg
separator
output
Example
arg
separator
output
amp
List
of
separator
s
used
by
PHP
to
parse
input
URLs
into
variables
PHP
s
default
setting
is
NOTE
Every
character
in
this
directive
is
considered
as
separator
suite
sur
la
page
suivante
Configuration
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
http
php
net
arg
separator
input
Example
arg
separator
input
This
directive
determines
which
super
global
arrays
are
registered
when
PHP
starts
up
If
the
register
globals
directive
is
enabled
it
also
determines
what
order
variables
are
populated
into
the
global
space
G
P
C
E
S
are
abbreviations
for
the
following
respective
super
globals
GET
POST
COOKIE
ENV
and
SERVER
There
is
a
performance
penalty
paid
for
the
registration
of
these
arrays
and
because
ENV
is
not
as
commonly
used
as
the
others
ENV
is
is
not
recommended
on
productions
servers
You
can
still
get
access
to
the
environment
variables
through
getenv
should
you
need
to
Default
Value
EGPCS
Development
Value
GPCS
Production
Value
GPCS
http
php
net
variables
order
variables
order
GPCS
laisser
la
valeur
par
défaut
request
order
GP
Ca
fait
longtemps
qu
il
faut
garder
cette
directive
à
Off
register
globals
Off
Determines
whether
the
deprecated
long
HTTP
VARS
type
predefined
variables
are
registered
by
PHP
or
not
As
they
are
deprecated
we
obviously
don
t
recommend
you
use
them
They
are
on
by
default
for
compatibility
reasons
but
they
are
not
recommended
on
production
servers
Default
Value
On
Development
Value
Off
Production
Value
Off
http
php
net
register
long
arrays
register
long
arrays
Off
A
activer
seulement
si
vous
voulez
utiliser
PHP
en
ligne
de
commande
et
lui
passer
des
arguments
register
argc
argv
Off
Meilleure
performance
avec
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
auto
globals
jit
On
Taille
maximale
des
données
acceptées
en
POST
http
php
net
post
max
size
post
max
size
M
A
éviter
désormais
magic
quotes
gpc
Off
idem
magic
quotes
runtime
Off
mimetype
par
défaut
text
html
default
mimetype
text
html
Jeu
de
caractères
par
défaut
laisser
à
vide
ou
choisir
un
jeu
de
caractères
default
charset
iso
default
charset
utf
File
Uploads
Autoriser
les
uploads
de
fichiers
file
uploads
On
Spécifier
le
répertoire
temporaire
por
les
fichiers
uploadés
upload
tmp
dir
tmp
upload
dir
Taille
maxi
pour
les
fichies
uploadés
upload
max
filesize
M
Nbre
de
fichiers
maxi
pouvant
être
uploadés
en
une
seule
requête
max
file
uploads
Fopen
wrappers
Whether
to
allow
the
treatment
of
URLs
like
http
or
ftp
as
files
http
php
net
allow
url
fopen
allow
url
fopen
On
Whether
to
allow
include
require
to
open
URLs
like
http
or
ftp
as
files
suite
sur
la
page
suivante
Configuration
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
http
php
net
allow
url
include
allow
url
include
Off
Define
the
anonymous
ftp
password
your
email
address
PHP
s
default
setting
for
this
is
empty
http
php
net
from
from
john
doe
com
Define
the
User
Agent
string
PHP
s
default
setting
for
this
is
empty
http
php
net
user
agent
user
agent
PHP
Timeout
pour
les
flux
basés
sur
des
sockets
default
socket
timeout
Dynamic
Extensions
Sous
Windows
extension
msql
dll
et
sous
UNIX
extension
msql
so
ou
avec
un
chemin
extension
path
to
extension
msql
so
Module
Settings
Date
Fuseau
horaire
utilisé
date
timezone
Europe
Paris
iconv
conversion
d
un
système
d
encodage
à
un
autre
iconv
input
encoding
ISO
iconv
internal
encoding
ISO
iconv
output
encoding
ISO
Pdo
mysql
En
cas
d
utilisation
du
nouveau
moteur
mysqlnd
pdo
mysql
cache
size
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Socket
par
défaut
pour
la
connexion
à
MySQL
La
valeur
par
défaut
fonctionne
le
plus
souvent
pdo
mysql
default
socket
var
mysql
mysql
sock
mail
function
For
Win
only
http
php
net
smtp
SMTP
localhost
http
php
net
smtp
port
smtp
port
Emplacement
pour
logger
les
appels
à
la
fonction
mail
mail
log
MySQL
Autorise
les
connexions
persistantes
N
apporte
AUCUNE
fonctionnalité
supplémentaire
Mais
peut
améliorer
les
performances
mysql
allow
persistent
On
If
mysqlnd
is
used
Number
of
cache
slots
for
the
internal
result
set
cache
http
php
net
mysql
cache
size
mysql
cache
size
Nbre
maxi
de
liens
persistants
mysql
max
persistent
Nombre
maxi
de
liens
permanents
veut
dire
sans
limitation
Mysql
max
links
Port
par
défaut
de
MySQL
mysql
default
port
Laisser
généralement
la
valeur
par
défaut
mysql
default
socket
Hôte
par
défaut
pour
mysql
connect
mysql
default
host
Utilisateur
par
défaut
pour
mysql
connect
mysql
default
user
Passwd
par
défaut
pour
mysql
connect
Ce
n
est
pas
une
bonne
chose
de
garder
le
passwd
ici
obsolete
mysql
default
password
suite
sur
la
page
suivante
Configuration
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Timeout
de
connexion
à
MySQL
mysql
connect
timeout
Mode
de
débuggage
MySQL
mysql
trace
mode
Off
MySQLi
Nbre
maxi
de
liens
persistants
mysqli
max
persistent
Autorise
les
connexions
persistantes
N
apporte
AUCUNE
fonctionnalité
supplémentaire
Mais
peut
améliorer
les
performances
mysqli
allow
persistent
On
Maximum
number
of
links
means
no
limit
http
php
net
mysqli
max
links
mysqli
max
links
If
mysqlnd
is
used
Number
of
cache
slots
for
the
internal
result
set
cache
http
php
net
mysqli
cache
size
mysqli
cache
size
Por
pour
mysqli
mysqli
default
port
Socket
par
défaut
pour
MySQLi
mysqli
default
socket
tmp
mysql
sock
Autorise
ou
interdit
la
reconnexion
mysqli
reconnect
Off
mysqlnd
activation
des
statistiques
de
mysqlnd
a
des
fins
de
réglages
du
serveur
de
BD
mysqlnd
collect
statistics
On
Même
chose
avec
les
opérations
sur
la
mémoire
mysqlnd
collect
memory
statistics
Off
Size
of
a
pre
allocated
buffer
used
when
sending
commands
to
MySQL
in
bytes
http
php
net
mysqlnd
net
cmd
buffer
size
mysqlnd
net
cmd
buffer
size
Size
of
a
pre
allocated
buffer
used
for
reading
data
sent
by
the
server
in
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
bytes
http
php
net
mysqlnd
net
read
buffer
size
mysqlnd
net
read
buffer
size
bcmath
Number
of
decimal
digits
for
all
bcmath
functions
http
php
net
bcmath
scale
bcmath
scale
Session
Les
sessions
doivent
elles
utiliser
les
cookies
session
use
cookies
Envoyer
les
cookies
à
travers
des
connexions
sécurisées
le
défaut
est
Off
Session
cookie
secure
PHP
maintient
un
cookie
avec
l
identifiant
de
session
c
est
une
précaution
visant
à
éviter
le
vol
de
session
ce
n
est
pas
une
parade
absolue
session
use
only
cookies
Nom
de
la
session
session
name
PHPSESSID
Démarrage
automatique
de
session
Désactivé
par
défaut
session
auto
start
Durée
de
vie
du
cookie
Si
placé
à
le
temps
que
le
navigateur
soit
redémarré
session
cookie
lifetime
Domaine
de
validité
du
cookie
session
cookie
domain
Pour
interdire
à
javascript
d
accéder
à
ce
cookie
session
cookie
httponly
On
HTTP
REFERER
doit
contenir
cette
sous
chaine
pour
être
considéré
comme
valide
Session
referer
check
suite
sur
la
page
suivante
Configuration
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Durée
d
expiration
du
document
en
minutes
session
cache
expire
Choix
d
une
fonction
de
hachage
pour
les
sessions
comme
MD
bits
SHA
bits
session
hash
function
Assertion
Assertions
actives
défaut
assert
active
On
Emettre
un
warning
en
cas
d
assertion
non
vérifiée
assert
warning
On
S
arrêter
en
cas
d
assertion
non
satisfaite
Désactivé
par
défaut
assert
bail
Off
Fonction
utilisateur
à
appeller
en
cas
d
assertion
non
satisfaite
assert
callback
Exemples
simples
bonjour
doctype
html
html
head
meta
charset
utf
title
Bonjour
depuis
PHP
title
head
body
php
echo
Bonjour
généré
dynamiquement
en
PHP
body
html
Résultat
brut
html
doctype
html
html
head
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
meta
charset
utf
title
Bonjour
depuis
PHP
title
head
body
Bonjour
généré
dynamiquement
en
PHP
body
html
Exécution
bonjour
Infos
PHP
php
phpinfo
Exécution
infos
php
User
Agent
doctype
html
html
head
title
Navigateur
title
body
Les
informations
sur
le
Navigateur
sont
php
echo
SERVER
HTTP
USER
AGENT
body
html
Exemple
de
Résultat
Exemples
simples
Cours
PHP
Accéléré
Version
Les
informations
sur
le
Navigateur
sont
Mozilla
Macintosh
U
Intel
Mac
OS
X
fr
fr
AppleWebKit
KHTML
like
Gecko
Version
Safari
Exécution
User
Agent
Vous
pouvez
consulter
la
documentation
de
PHP
sur
doc
php
http
php
net
manual
fr
Imbrication
de
code
HTML
et
PHP
On
peut
par
exemple
—
Commencer
une
page
HTML
—
puis
écrire
un
peu
de
PHP
—
reprendre
en
HTML
—
etc
Exemple
doctype
html
html
head
title
Navigateur
title
body
Les
informations
sur
le
Navigateur
sont
php
AGENT
SERVER
HTTP
USER
AGENT
echo
AGENT
echo
n
P
if
stristr
AGENT
MSIE
b
Vous
semblez
utiliser
Internet
Explorer
b
php
elseif
preg
match
Firefox
i
AGENT
b
Vous
semblez
utiliser
Firefox
b
php
elseif
preg
match
chrome
i
AGENT
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
b
Vous
semblez
utiliser
Chrome
b
php
elseif
preg
match
Safari
AGENT
b
Vous
semblez
utiliser
Safari
b
php
else
echo
Navigateur
Inconnu
body
html
ATTENTION
ça
peut
vite
devenir
ILLISIBLE
Exécution
user
agent
php
Remèdes
Pour
ne
pas
écrire
ce
genre
de
code
quelques
solutions
courantes
—
Utiliser
des
fonctions
PHP
—
Utiliser
des
Classes
et
Objets
PHP
—
Séparer
les
modèles
des
Vues
—
Séparer
les
Modèles
les
Vues
et
les
Contrôleurs
Modèle
MVC
—
Utiliser
des
systèmes
de
templates
comme
Twig
Un
formulaire
HTML
et
sa
réponse
en
PHP
On
code
ici
—
un
petit
formulaire
HTML
—
et
sa
réponse
en
PHP
Formulaire
HTML
doctype
html
html
head
meta
charset
utf
title
Formulaire
html
title
head
body
form
action
reponse
php
method
GET
suite
sur
la
page
suivante
Un
formulaire
HTML
et
sa
réponse
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Votre
nom
input
type
text
name
nom
Votre
âge
input
type
text
name
age
p
input
type
submit
value
Envoyer
form
body
html
Sa
réponse
doctype
html
html
head
meta
charset
utf
title
Test
Formulaire
PHP
title
head
body
h
Bonjour
php
echo
GET
nom
h
h
Vous
semblez
avoir
php
echo
GET
age
h
php
n
GET
nom
a
GET
age
Votre
nom
est
stocké
dans
la
variable
n
dont
le
type
est
php
echo
gettype
n
Votre
âge
est
stocké
dans
la
variable
b
a
b
br
dont
le
type
est
i
php
echo
gettype
a
i
br
On
peut
la
transformer
en
i
integer
i
en
faisant
php
settype
a
integer
br
Type
de
a
php
echo
gettype
a
body
html
Exécution
Formulaire
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Les
variables
en
PHP
Déclaration
simple
php
variable
une
variable
en
PHP
Une
autre
variable
Variable
Existence
de
variables
la
fonction
isset
php
a
une
variable
en
PHP
if
isset
a
echo
la
variable
a
existe
unset
a
echo
la
variable
a
a
été
supprimée
Test
de
variables
la
fonction
empty
php
a
une
variable
en
PHP
if
empty
a
echo
La
variable
existe
et
elle
n
est
pas
vide
Avertissement
La
fonction
empty
répond
vrai
si
la
variable
n
existe
pas
et
ceci
sans
faire
aucun
warning
En
outre
avant
PHP
on
ne
peut
pas
l
utiliser
sur
autre
chose
que
des
variables
impossible
d
appeller
une
fonction
dans
l
argument
qu
on
lui
passe
Test
de
variables
en
PHP
avec
l
opérateur
coalescent
L
opérateur
Null
coalescent
permet
de
simplifier
certains
tests
d
existence
de
variables
et
d
alternatives
comme
par
exemple
php
a
non
initialisée
b
suite
sur
la
page
suivante
Les
variables
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
echo
a
affiche
echo
PHP
EOL
echo
a
b
affiche
echo
PHP
EOL
Ce
qui
permet
de
limiter
le
recours
à
isset
dans
de
nombreuses
situations
comme
php
Récupère
la
valeur
de
GET
email
et
retourne
nobody
si
elle
n
existe
pas
mail
GET
email
nobody
null
Equivalent
à
mail
isset
GET
email
GET
email
nobody
null
Coalescing
peut
être
chainé
On
renvoie
la
première
valeur
définie
parmi
GET
email
POST
email
et
nobody
null
com
mail
GET
email
POST
email
nobody
null
echo
mail
n
Portée
des
variables
—
Par
défaut
toutes
les
variables
sont
locales
—
Leur
portée
se
réduit
à
la
fonction
ou
au
bloc
de
leur
déclaration
—
Pour
déclarer
une
variable
globale
on
peut
utiliser
le
tableau
GLOBALS
php
GLOBALS
MaVar
Bonjour
Constantes
php
define
USER
TOTO
echo
USER
Notez
l
absence
de
ici
Les
chaînes
en
PHP
Les
bases
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Guillemets
ou
Cotes
php
var
Hello
PHP
machaine
le
contenu
de
var
est
var
br
echo
machaine
ou
avec
des
mystring
le
contenu
de
var
est
var
echo
mystring
dont
le
résultat
sera
toujours
le
contenu
de
var
est
Hello
PHP
La
concaténation
A
l
aide
de
La
longueur
d
une
chaine
php
int
lg
strlen
chaine
Accéder
au
caractère
i
d
une
chaine
php
echo
chaine
i
La
chaine
est
traitée
comme
un
tableau
indéxé
par
un
entier
La
plupart
des
tableaux
de
PHP
sont
indéxés
par
des
chaines
Mettre
en
majuscules
minuscules
—
avec
strtoupper
pour
obtenir
des
majuscules
—
avec
strtolower
pour
mettre
en
minuscules
—
avec
ucfirst
pour
mettre
en
majuscule
la
première
lettre
d
une
chaine
—
avec
ucwords
pour
mettre
en
majuscule
la
première
lettre
de
chaque
mot
dans
une
chaine
Recherche
de
sous
chaines
ou
de
motifs
dans
une
chaine
—
avec
strstr
—
avec
stristr
—
avec
ereg
ou
eregi
Les
chaînes
en
PHP
Cours
PHP
Accéléré
Version
Par
exemple
php
AGENT
SERVER
HTTP
USER
AGENT
echo
AGENT
echo
n
P
if
stristr
AGENT
MSIE
echo
Vous
semblez
utiliser
Internet
Explorer
b
elseif
ereg
Firefox
AGENT
echo
Vous
semblez
utiliser
Firefox
b
elseif
eregi
chrome
AGENT
echo
Vous
semblez
utiliser
Chrome
b
Indication
Les
variantes
de
ces
fonctions
comportant
un
i
indiquent
une
insensibilité
à
la
casse
c
est
à
dire
que
les
majuscules
et
minuscules
sont
considérées
comme
identiques
Exemple
Test
un
peu
plus
complet
du
UserAgent
php
function
getBrowser
userAgent
if
preg
match
MSIE
i
userAgent
num
return
num
elseif
preg
match
Firefox
i
userAgent
num
return
num
elseif
preg
match
chrome
i
userAgent
num
return
num
elseif
preg
match
safari
i
userAgent
num
preg
match
Version
userAgent
num
return
Safari
num
else
return
Navigateur
Inconnu
if
empty
SERVER
HTTP
USER
AGENT
echo
Votre
navigateur
semble
etre
n
echo
getBrowser
SERVER
HTTP
USER
AGENT
Test
avec
des
UserAgent
connus
FF
Mozilla
Macintosh
Intel
Mac
OS
X
rv
Gecko
Firefox
msie
Mozilla
compatible
MSIE
Windows
NT
Trident
InfoPath
SLCC
NET
CLR
NET
CLR
NET
CLR
gpp
gba
UNTRUSTED
chrome
Mozilla
Windows
NT
Win
x
AppleWebKit
KHTML
like
Gecko
Chrome
Safari
safari
Mozilla
iPad
CPU
OS
like
Mac
OS
X
AppleWebKit
KHTML
like
Gecko
Version
Mobile
A
d
Safari
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
echo
br
Test
Firefox
br
n
echo
getBrowser
FF
br
n
echo
br
Test
MSIE
n
echo
getBrowser
msie
br
n
echo
br
Test
Chrome
n
echo
getBrowser
chrome
br
n
echo
br
Test
Safari
n
echo
getBrowser
safari
Résultat
br
Test
Firefox
br
Firefox
br
br
Test
MSIE
MSIE
br
br
Test
Chrome
Chrome
br
br
Test
Safari
Safari
Version
Le
typage
en
PHP
Les
fonctions
gettype
et
settype
gettype
renvoie
l
un
des
résultats
suivants
—
integer
—
double
—
string
—
array
—
object
—
class
—
unknown
type
settype
change
le
type
d
un
élément
php
a
settype
a
integer
suite
sur
la
page
suivante
Le
typage
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
echo
le
contenu
de
la
variable
a
est
a
dont
le
résultat
sera
le
contenu
de
la
variable
a
est
Fonctions
de
test
—
is
int
—
is
long
—
is
double
—
is
array
—
is
object
—
is
string
Attention
N
oubliez
pas
comme
en
JavaScript
la
différence
entre
l
opérateur
et
Le
premier
vérifie
l
égalité
des
contenus
en
ne
tenant
pas
compte
d
une
éventuelle
diffé
rence
de
typage
int
ou
string
par
exemple
tandis
que
le
second
vérifie
une
égalité
stricte
En
d
autres
termes
est
VRAI
tandis
que
est
FAUX
Quelques
particularités
de
PHP
Valeurs
des
variables
php
toto
Bonjour
br
n
var
toto
echo
var
dont
le
résultat
sera
toujours
Résultat
brut
Bonjour
br
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
La
fonction
eval
Permet
l
évaluation
d
expressions
arithmetiques
directement
en
PHP
Existe
aussi
en
JavaScript
Délicat
à
manipuler
problématique
en
termes
de
sécurité
Les
tableaux
en
PHP
Tableaux
associatifs
parcours
avec
boucle
foreach
php
jours
array
Lu
Lundi
Ma
Mardi
Me
Mercredi
Je
Jeudi
Ve
Vendredi
Sa
Samedi
Di
Dimanche
foreach
jours
as
key
val
echo
key
val
br
n
Ce
qui
donne
Lu
Lundi
Ma
Mardi
Me
Mercredi
Je
Jeudi
Ve
Vendredi
Sa
Samedi
Di
Dimanche
Affichage
avec
print
r
php
print
r
jours
Résultat
brut
html
Array
Lu
Lundi
Ma
Mardi
Me
Mercredi
Je
Jeudi
Ve
Vendredi
suite
sur
la
page
suivante
Les
tableaux
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Sa
Samedi
Di
Dimanche
Essayez
vous
même
tabs
Utilisation
de
la
fonction
array
walk
php
array
walk
jours
aff
tab
En
ayant
défini
au
préalable
php
function
aff
tab
val
key
echo
key
val
br
n
On
obtient
le
même
résultat
qu
avec
la
boucle
foreach
Tri
simple
d
un
tableau
php
sort
jours
array
walk
jours
aff
tab
On
obtient
Dimanche
Jeudi
Lundi
Mardi
Mercredi
Samedi
Vendredi
C
est
à
dire
que
—
Le
tableau
est
trié
selon
l
ordre
de
ses
valeurs
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
—
les
clefs
sont
effacées
et
réaffectées
avec
des
entiers
Si
on
veut
préserver
également
les
clefs
du
tableau
associatif
il
faut
utiliser
la
méthode
suivante
Tri
selon
l
ordre
naturel
avec
natsort
php
jours
array
Lu
Lundi
Ma
Mardi
Me
Mercredi
Je
Jeudi
Ve
Vendredi
Sa
Samedi
Di
Dimanche
var
dump
jours
natsort
jours
var
dump
jours
Résultat
brut
html
array
Lu
string
Lundi
Ma
string
Mardi
Me
string
Mercredi
Je
string
Jeudi
Ve
string
Vendredi
Sa
string
Samedi
Di
string
Dimanche
array
Di
string
Dimanche
Je
string
Jeudi
Lu
string
Lundi
Ma
string
Mardi
Me
string
Mercredi
Sa
string
Samedi
suite
sur
la
page
suivante
Les
tableaux
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Ve
string
Vendredi
Exécution
tritabnat
On
peut
aussi
utiliser
la
fonction
natcasesort
si
on
ne
veut
pas
se
préoccuper
de
la
casse
des
chaines
présentes
dans
le
tableau
soit
à
peu
près
l
ordre
du
dictionnaire
Les
tableaux
prédéfinis
de
PHP
Les
tableaux
concernant
le
protocole
HTTP
—
GET
POST
ou
REQUEST
qui
englobe
les
—
SERVER
Variables
décrivant
le
client
ou
la
page
courante
—
GLOBALS
variables
globales
—
COOKIE
pour
les
cookies
—
SESSION
pour
les
sessions
Exemple
récupération
de
SERVER
grâce
à
la
fonction
getenv
php
function
infos
env
array
remote
addr
http
accept
language
http
host
http
user
agent
script
filename
server
addr
server
name
server
signature
server
software
request
method
query
string
request
uri
script
name
Construction
d
un
tableau
associatif
Avec
les
valeurs
lues
dans
l
environnement
retour
array
foreach
env
as
clef
retour
clef
getenv
clef
return
retour
echo
Voici
les
infos
disponibles
BR
tab
infos
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
foreach
tab
as
clef
val
echo
clef
val
br
n
Résultat
Voici
les
infos
disponibles
remote
addr
http
accept
language
fr
fr
http
host
localhost
http
user
agent
Mozilla
Macintosh
U
Intel
Mac
OS
X
fr
fr
AppleWebKit
KHTML
like
Gecko
Version
Safari
script
filename
Users
roza
Sites
php
exemples
infospy
php
server
addr
server
name
localhost
server
signature
server
software
Apache
Unix
mod
ssl
OpenSSL
l
DAV
PHP
request
method
GET
query
string
request
uri
roza
php
exemples
infospy
php
script
name
roza
php
exemples
infospy
php
Ùser
Agent
http
localhost
roza
php
exemples
infospy
php
Exécution
infospy
L
inclusion
de
fichiers
externes
include
—
Semblable
aux
include
du
C
C
—
Réalise
une
inclusion
physique
du
fichier
demandé
include
once
—
identique
au
include
—
protège
contre
d
éventuelles
inclusions
multiples
L
inclusion
de
fichiers
externes
Cours
PHP
Accéléré
Version
—
qui
pourraient
mener
à
des
erreurs
redéclarations
etc
php
include
once
connect
php
require
et
require
once
—
fonctionnent
comme
le
include
et
le
include
once
respectivement
—
mais
le
programme
s
arrête
si
le
fichier
inclus
n
existe
pas
php
require
malib
php
require
once
connect
php
dirname
Pour
savoir
dans
quel
répertoire
on
se
trouve
on
peut
utiliser
la
fonction
PHP
dirname
php
include
once
dirname
FILE
config
config
inc
php
Indication
Lorsqu
on
inclus
ou
désigne
des
fichiers
il
vaut
mieux
utiliser
des
chemins
relatifs
pour
repérer
les
fichiers
comme
ci
dessus
plutôt
que
de
donner
un
chemin
absolu
par
rapport
à
la
racine
du
serveur
du
style
home
user
www
config
config
inc
php
Cela
sera
beaucoup
plus
portable
d
un
serveur
à
l
autre
et
vous
évitera
bien
des
déboires
Avertissement
L
utilisation
systématique
de
la
version
avec
once
include
once
ou
re
quire
once
n
est
pas
recommandée
car
elle
peut
causer
des
ralentissements
à
l
exécution
du
programme
Les
Objets
en
PHP
Evolutions
et
grands
principes
—
Les
objets
existent
en
PHP
à
partir
de
la
version
—
Changements
importants
en
PHP
Convergence
vers
le
modèle
objet
de
Java
—
Introduction
comme
en
Java
d
interfaces
et
de
classes
abstraites
—
emploi
des
modifieurs
private
et
public
comme
en
java
—
On
retrouve
aussi
toString
clone
et
un
mécanisme
de
traitement
des
exceptions
semblable
à
celui
de
Java
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
—
Les
constructeurs
s
appellent
désormais
construct
—
et
les
destructeurs
destruct
—
les
méthodes
portent
le
mot
clef
function
mais
ne
signalent
pas
leur
type
de
retour
—
les
commentaires
de
documentation
se
font
à
la
manière
de
Java
Indication
Les
objets
s
instancient
avec
le
mot
clef
new
comme
en
Java
ou
C
mais
on
utilise
pour
signifier
l
appel
d
une
méthode
Le
est
déjà
pris
pour
la
concaténation
des
chaînes
Un
Objet
Simple
Etudiant
en
PHP
Fabriquons
maintenant
un
objet
simple
en
PHP
Ecrivons
un
objet
représentant
un
étudiant
avec
ses
données
—
identifiant
—
nom
—
date
de
naissance
et
des
méthodes
pour
opérer
sur
ces
données
—
constructeur
—
getters
et
setters
—
equals
—
toString
pour
affichage
ce
qui
donne
le
code
suivant
php
Classe
Etudiant
en
PHP
class
Etudiant
Identification
unique
d
un
etudiant
protected
etudiant
id
Nom
de
l
etudiant
protected
nom
Date
de
naissance
de
l
etudiant
protected
naissance
public
function
construct
id
nom
naissance
this
etudiant
id
int
id
cast
vers
integer
this
nom
string
nom
cast
vers
string
this
naissance
int
naissance
cast
vers
date
timestamp
Fonction
de
comparaison
simplifiee
entre
etudiants
comparera
id
nom
et
naissance
suite
sur
la
page
suivante
Les
Objets
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
public
function
equals
etudiant
etudiant
return
this
getId
etudiant
getId
public
function
getId
return
this
etudiant
id
public
function
getNom
return
this
nom
public
function
getNaissance
return
this
naissance
public
function
toString
setlocale
LC
TIME
fr
FR
ne
strftime
A
d
B
Y
this
naissance
return
etudiant
id
this
getId
nom
this
getNom
ne
Test
date
default
timezone
set
Europe
Paris
etu
new
Etudiant
Talon
time
var
dump
etu
echo
br
echo
etu
Resultat
object
Etudiant
etudiant
id
protected
int
nom
protected
string
Talon
naissance
protected
int
br
etudiant
id
nom
Talon
Mercredi
septembre
Execution
etudiant
php
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Indication
Lorsqu
on
utilise
l
opérateur
de
comparaison
sur
des
objets
ceux
ci
sont
comparés
en
utilisant
les
règles
suivantes
deux
objets
sont
égaux
s
ils
sont
instances
de
la
même
classe
et
ont
les
mêmes
attributs
et
valeurs
les
valeurs
étant
comparées
avec
l
opérateur
Lors
de
l
utilisation
de
l
opérateur
d
identité
les
objets
sont
identiques
uniquement
s
ils
font
référence
à
la
même
instance
de
la
même
classe
Avertissement
Beaucoup
de
programmeurs
débutants
se
contentent
d
utiliser
PHP
comme
un
langage
purement
procédural
sans
utiliser
son
côté
objet
Ceci
les
bloquera
tôt
ou
tard
dans
l
apprentissage
du
langage
et
des
grands
frameworks
PHP
Si
vous
êtes
trop
mal
à
l
aise
avec
les
Objets
suivez
d
abord
un
cours
d
introduction
à
la
programmation
Objet
en
Java
Python
ou
C
par
exemple
Les
collections
en
PHP
En
PHP
standard
Collections
Arrays
—
Si
on
se
contente
de
ce
qu
offre
PHP
en
standard
les
collections
se
résument
à
l
utilisation
des
tableaux
associatifs
en
PHP
—
Le
framework
des
Collections
en
Java
est
beaucoup
plus
riche
DataStructures
ds
Il
faut
installer
une
librairie
supplémentaire
ds
DataStructures
pour
avoir
accès
à
un
Framework
similaire
en
PHP
Voir
Documentation
Collections
php
http
php
net
manual
fr
book
ds
php
On
va
pour
utiliser
la
commande
pecl
pour
installer
ds
comme
une
extension
pecl
install
ds
Puis
charger
l
extension
en
ajoutant
aux
fichiers
ini
de
PHP
extension
ds
so
Cette
extension
nous
donne
accès
à
des
classes
similaires
à
celles
du
framework
des
Collections
en
Java
Les
classes
proposées
sont
par
exemple
—
Sequence
—
Vector
—
Deque
—
Vector
Les
collections
en
PHP
Cours
PHP
Accéléré
Version
—
Pair
—
Set
—
Stack
—
Queue
—
PriorityQueue
Utilisation
de
Ds
Les
classes
et
interfaces
de
ds
s
utilisent
dans
un
espace
de
nommage
Ds
php
vector
new
Ds
Vector
vector
push
un
vector
push
deux
vector
push
trois
quatre
unpacking
vector
push
cinq
six
print
r
vector
Exemple
d
utilisation
de
la
classe
Set
Utilisons
maintenant
concrètement
la
classe
Set
Question
HTML
dans
un
select
multiple
Prenons
un
petit
formulaire
en
HTML
qui
propose
un
choix
de
couleurs
dans
un
select
p
Quelles
sont
les
couleurs
du
maillot
des
panthères
du
Fleury
Loiret
Handball
select
name
coul
multiple
size
option
value
jaune
Jaune
option
value
rose
Rose
option
value
bleu
Bleu
option
value
noir
Noir
option
value
blanc
Blanc
option
value
vert
Vert
select
p
Réponse
PHP
avec
Collections
php
if
empty
GET
coul
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
couleursReponse
new
Ds
Set
GET
coul
couleursCorrectes
new
Ds
Set
rose
noir
blanc
Calculons
la
différence
des
ensembles
et
voyons
si
elle
est
vide
if
couleursReponse
diff
couleursCorrectes
isEmpty
echo
Bravo
les
couleurs
de
Fleury
Hand
Ball
sont
bien
Rose
Noir
et
Blanc
else
echo
Mauvaise
réponse
les
couleurs
de
Fleury
Hand
Ball
sont
Rose
Noir
et
Blanc
Sans
Collections
on
utilise
les
tableaux
Sans
Ds
nous
aurions
été
obligés
de
nous
contenter
de
tableaux
PHP
et
d
utiliser
par
exemple
la
méthode
array
diff
Voir
array
diff
php
http
php
net
manual
fr
function
array
diff
php
Avec
des
Arrays
On
peut
ici
s
en
sortir
avec
de
simples
tableaux
PHP
en
vérifiant
que
la
taille
du
tableau
des
réponses
données
est
la
même
que
celle
du
tableau
des
bonnes
réponses
puis
que
les
contenus
de
ces
tableaux
sont
identiques
php
if
empty
GET
coul
couleursReponse
GET
coul
couleursCorrectes
array
rose
noir
blanc
if
count
couleursReponse
count
couleursCorrectes
array
diff
couleursReponse
couleursCorrectes
echo
Bravo
les
couleurs
de
Fleury
Hand
Ball
sont
bien
Rose
Noir
et
Blanc
else
echo
Mauvaise
réponse
les
couleurs
de
Fleury
Hand
Ball
sont
Rose
Noir
et
Blanc
Connexion
aux
bases
de
données
depuis
PHP
Une
table
simple
en
SQL
Connexion
aux
bases
de
données
depuis
PHP
Cours
PHP
Accéléré
Version
CREATE
TABLE
CARNET
ÌDìnt
NOT
NULL
AUTO
INCREMENT
NOM
varchar
DEFAULT
NULL
PRENOM
varchar
DEFAULT
NULL
NAISSANCÈ
date
DEFAULT
NULL
VILLÈ
varchar
DEFAULT
NULL
PRIMARY
KEY
ÌD
ENGINE
InnoDB
AUTO
INCREMENT
DEFAULT
CHARSET
utf
INSERT
INTO
CARNET
VALUES
SMITH
JOHN
ORLEANS
DURAND
JEAN
ORLEANS
GUDULE
JEANNE
TOURS
ZAPATA
EMILIO
ORLEANS
JOURDAIN
NICOLAS
TOURS
DUPUY
MARIE
BLOIS
ANDREAS
LOU
ST
Petersbourg
Kafka
Franz
Prague
Dalton
Joe
Dallas
On
insère
cette
table
dans
MySQL
en
ligne
de
commande
ou
à
l
aide
de
PHPMyAdmin
Puis
pour
consulter
cette
table
depuis
PHP
on
utilise
le
connecteur
PDO
qui
offre
une
interface
de
connexion
utilisable
pour
tous
les
SGBD
Systemes
de
Gestion
de
Bases
de
Donnees
habituels
comme
MySQL
PostgreSQL
Oracle
ou
Microsoft
SQL
Server
Connexion
Simple
en
PHP
avec
PDO
doctype
html
html
head
title
Connexion
à
MySQL
avec
PDO
title
meta
charset
utf
head
body
h
Interrogation
de
la
table
CARNET
avec
PDO
h
php
require
connect
php
pour
oracle
dsn
oci
dbname
serveur
base
pour
sqlite
dsn
sqlite
tmp
base
sqlite
dsn
mysql
dbname
BASE
host
SERVER
try
connexion
new
PDO
dsn
USER
PASSWD
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
catch
PDOException
e
printf
Échec
de
la
connexion
s
n
e
getMessage
exit
sql
SELECT
from
CARNET
if
connexion
query
sql
echo
Pb
d
accès
au
CARNET
else
foreach
connexion
query
sql
as
row
echo
row
PRENOM
row
NOM
né
e
le
row
NAISSANCE
br
n
body
html
Avec
un
fichier
connect
php
contenant
les
informations
de
connexion
au
serveur
MySQL
php
define
USER
scott
define
PASSWD
tiger
define
SERVER
localhost
define
BASE
dbscott
Resultat
brut
html
doctype
html
html
head
title
Connexion
à
MySQL
avec
PDO
title
meta
charset
utf
head
body
h
Interrogation
de
la
table
CARNET
avec
PDO
h
JOHN
SMITHné
e
le
br
JEAN
DURANDné
e
le
br
JEANNE
GUDULEné
e
le
br
EMILIO
ZAPATAné
e
le
br
NICOLAS
JOURDAINné
e
le
br
MARIE
DUPUYné
e
le
br
suite
sur
la
page
suivante
Connexion
aux
bases
de
données
depuis
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
LOU
ANDREASné
e
le
br
Franz
Kafkané
e
le
br
Joe
Daltonné
e
le
br
body
html
Execution
carnet
php
Fabrication
d
une
table
HTML
avec
les
résultats
html
head
title
Connexion
à
MySQL
avec
PDO
title
meta
charset
utf
body
h
Interrogation
de
la
table
CARNET
avec
PDO
h
php
require
connect
php
dsn
mysql
dbname
BASE
host
SERVER
try
connexion
new
PDO
dsn
USER
PASSWD
catch
PDOException
e
printf
Échec
de
la
connexion
s
n
e
getMessage
exit
sql
SELECT
from
CARNET
if
connexion
query
sql
echo
Pb
d
accès
au
CARNET
else
table
tr
td
Nom
td
td
Prénom
td
tr
php
foreach
connexion
query
sql
as
row
echo
tr
td
row
NOM
td
td
row
PRENOM
td
tr
n
table
php
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
body
html
Résultats
bruts
html
head
title
Connexion
à
MySQL
avec
PDO
title
meta
charset
utf
body
h
Interrogation
de
la
table
CARNET
avec
PDO
h
table
tr
td
Nom
td
td
Prénom
td
tr
tr
td
SMITH
td
td
JOHN
td
tr
tr
td
DURAND
td
td
JEAN
td
tr
tr
td
GUDULE
td
td
JEANNE
td
tr
tr
td
ZAPATA
td
td
EMILIO
td
tr
tr
td
JOURDAIN
td
td
NICOLAS
td
tr
tr
td
DUPUY
td
td
MARIE
td
tr
tr
td
ANDREAS
td
td
LOU
td
tr
tr
td
Kafka
td
td
Franz
td
tr
tr
td
Dalton
td
td
Joe
td
tr
table
body
html
Execution
Carnet
Table
On
peut
faire
un
petit
refactoring
avec
une
fonction
qui
établit
la
connexion
à
la
base
php
require
connect
php
function
connect
bd
dsn
mysql
dbname
BASE
host
SERVER
try
connexion
new
PDO
dsn
USER
PASSWD
suite
sur
la
page
suivante
Connexion
aux
bases
de
données
depuis
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
catch
PDOException
e
printf
Échec
de
la
connexion
s
n
e
getMessage
exit
return
connexion
et
améliorer
l
affichage
des
résultats
html
head
title
Connexion
à
MySQL
avec
PDO
title
meta
charset
utf
link
rel
stylesheet
href
tabstyle
css
head
body
h
Interrogation
de
la
table
CARNET
avec
PDO
h
php
require
once
connexion
php
connexion
connect
bd
sql
SELECT
from
CARNET
if
connexion
query
sql
echo
Pb
d
accès
au
CARNET
else
table
class
centre
id
jolie
tr
td
ID
td
td
Prénom
td
td
Nom
td
td
Naissance
td
tr
php
foreach
connexion
query
sql
as
row
echo
tr
td
row
ID
td
td
row
PRENOM
td
td
row
NOM
td
td
row
NAISSANCE
td
tr
br
n
table
php
body
html
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Avec
le
fichier
CSS
Bordure
simple
autour
des
tableaux
table
th
td
border
px
solid
grey
table
border
collapse
collapse
Centrage
tableau
table
centre
margin
auto
centrage
du
texte
dans
les
cellules
du
tableau
table
centre
td
text
align
center
table
jolie
tr
first
child
background
LightPink
table
jolie
tr
nth
child
n
background
EFD
C
table
jolie
tr
nth
child
n
background
BCBCD
si
un
tableau
a
une
seule
ligne
on
l
affiche
en
rouge
table
tr
only
child
background
red
Résultats
bruts
html
head
title
Connexion
à
MySQL
avec
PDO
title
meta
charset
utf
link
rel
stylesheet
href
tabstyle
css
head
body
h
Interrogation
de
la
table
CARNET
avec
PDO
h
table
class
centre
id
jolie
tr
td
ID
td
td
Prénom
td
td
Nom
td
td
Naissance
td
tr
tr
td
td
td
JOHN
td
td
SMITH
td
td
td
tr
br
tr
td
td
suite
sur
la
page
suivante
Connexion
aux
bases
de
données
depuis
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
td
JEAN
td
td
DURAND
td
td
td
tr
br
tr
td
td
td
JEANNE
td
td
GUDULE
td
td
td
tr
br
tr
td
td
td
EMILIO
td
td
ZAPATA
td
td
td
tr
br
tr
td
td
td
NICOLAS
td
td
JOURDAIN
td
td
td
tr
br
tr
td
td
td
MARIE
td
td
DUPUY
td
td
td
tr
br
tr
td
td
td
LOU
td
td
ANDREAS
td
td
td
tr
br
tr
td
td
td
Franz
td
td
Kafka
td
td
td
tr
br
tr
td
td
td
Joe
td
td
Dalton
td
td
td
tr
br
table
body
html
Execution
Carnet
Table
Version
On
peut
générer
des
pages
différentes
avec
des
listes
déroulantes
ou
des
listes
de
liens
listes
à
puces
etc
Création
d
une
liste
déroulante
doctype
html
html
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
head
title
Connexion
à
MySQL
avec
PDO
title
meta
charset
utf
head
body
h
Interrogation
de
la
table
CARNET
avec
PDO
h
php
require
once
connexion
php
connexion
connect
bd
sql
SELECT
from
CARNET
if
connexion
query
sql
echo
Pb
d
accès
au
CARNET
else
form
action
recherche
php
method
GET
select
name
ID
php
foreach
connexion
query
sql
as
row
if
empty
row
NOM
echo
option
value
row
ID
row
PRENOM
row
NOM
option
n
select
input
type
submit
value
Rechercher
form
php
body
html
Remarquez
l
usage
de
la
clef
primaire
de
la
table
comme
value
des
options
ce
qui
assurent
l
unicité
des
valeurs
et
évite
toute
amiguité
Résultats
bruts
doctype
html
html
head
title
Connexion
à
MySQL
avec
PDO
title
meta
charset
utf
head
body
suite
sur
la
page
suivante
Connexion
aux
bases
de
données
depuis
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
h
Interrogation
de
la
table
CARNET
avec
PDO
h
form
action
recherche
php
method
GET
select
name
ID
option
value
JOHN
SMITH
option
option
value
JEAN
DURAND
option
option
value
JEANNE
GUDULE
option
option
value
EMILIO
ZAPATA
option
option
value
NICOLAS
JOURDAIN
option
option
value
MARIE
DUPUY
option
option
value
LOU
ANDREAS
option
option
value
Franz
Kafka
option
option
value
Joe
Dalton
option
select
input
type
submit
value
Rechercher
form
body
html
Execution
Carnet
Select
Requêtes
préparées
en
PHP
Recherche
simple
en
PHP
avec
PDO
doctype
html
html
head
title
Recherche
d
une
personne
par
ID
title
meta
charset
utf
head
body
php
wanted
GET
ID
if
empty
wanted
echo
h
Recherche
de
wanted
h
require
once
connexion
php
connexion
connect
bd
sql
SELECT
from
CARNET
where
ID
wanted
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
if
connexion
query
sql
echo
Pb
de
requete
else
foreach
connexion
query
sql
as
row
echo
row
NOM
row
PRENOM
br
n
body
html
Appel
avec
le
paramètre
ID
passé
sur
l
URL
php
exemples
pdo
recherche
php
ID
Execution
recherche
php
Mais
lorsqu
il
y
a
de
nombreux
paramètres
on
se
retrouve
avec
de
nombreuses
concaténations
de
chaines
entourées
de
“
cotes
”
ce
qui
est
une
grande
source
d
erreurs
et
de
lenteurs
d
écriture
Pour
remédier
à
cela
on
peut
utiliser
des
requêtes
préparées
qui
permettent
de
bien
dissocier
la
requête
des
paramètres
qui
vont
lui
être
fournis
avant
son
exécution
Ces
PreparedStatement
seront
également
bien
préférables
en
termes
de
sécurité
et
à
utiliser
systématiquement
Recherche
avec
PreparedStatement
doctype
html
html
head
title
Recherche
d
une
personne
par
ID
title
meta
charset
utf
head
body
php
wanted
GET
ID
if
empty
wanted
echo
h
Recherche
de
wanted
h
require
once
connexion
php
connexion
connect
bd
sql
SELECT
from
CARNET
where
ID
id
stmt
connexion
prepare
sql
stmt
bindParam
id
GET
ID
stmt
execute
if
stmt
echo
Pb
d
accès
au
CARNET
else
suite
sur
la
page
suivante
Requêtes
préparées
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
if
stmt
rowCount
echo
Inconnu
br
else
foreach
stmt
as
row
echo
row
PRENOM
row
NOM
né
e
le
row
NAISSANCE
br
body
html
Les
requêtes
préparées
limitent
fortement
la
possibilité
d
”
injections
SQL
comme
nous
le
ver
ront
plus
tard
Compléments
sur
PDO
Sécurité
Filtrage
d
entrées
On
peut
vouloir
nourrir
une
requête
directement
avec
des
données
provenant
d
un
formulaire
php
sql
sprintf
SELECT
id
FROM
CARNET
WHERE
email
s
GET
email
On
voit
bien
que
la
valeur
de
l
entrée
email
dans
le
tableau
GET
n
est
absolument
pas
vérfifiée
avant
son
utilisation
On
peut
essayer
dans
ce
cas
d
utiliser
un
filtre
PHP
pour
contrôler
un
peu
les
choses
php
sql
sprintf
SELECT
id
FROM
CARNET
WHERE
email
s
filter
input
INPUT
GET
email
Mais
ceci
constitue
une
manière
peu
sûre
de
procéder
malgré
l
utilisation
du
filtre
PHP
Cela
laisse
en
effet
la
possiblilité
d
insertion
de
code
malveillant
non
contrôlé
L
exemple
classique
est
la
requête
SQL
construite
dans
la
chaine
suivante
php
sql
SELECT
nom
FROM
USERS
WHERE
login
REQUEST
login
AND
PASSWD
REQUEST
pass
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Qui
donne
lors
de
son
exécution
avec
REQUEST
“
login
”
toto
”
SELECT
nom
FROM
USERS
WHERE
login
toto
AND
PASSWD
REQUEST
pass
Avertissement
Le
constituant
un
début
de
commentaire
SQL
ceci
constitue
une
in
jection
SQL
qui
est
l
une
des
principales
failles
de
sécurité
exploitées
par
les
Hackers
Pour
s
en
prémunir
il
faut
utiliser
à
la
fois
le
filtrage
des
entrées
et
les
requêtes
préparées
php
sql
SELECT
id
FROM
CARNET
WHERE
email
email
statement
pdo
prepare
sql
email
filter
input
INPUT
GET
email
statement
bindValue
email
email
Il
faut
parfois
préciser
dans
un
troisième
argument
le
type
des
paramètres
attendus
php
sql
SELECT
email
FROM
CARNET
WHERE
id
id
statement
pdo
prepare
sql
userId
filter
input
INPUT
GET
id
statement
bindValue
id
userId
PDO
PARAM
INT
Filtrage
en
PHP
Les
vérifications
dans
les
formulaires
HTML
et
en
JavaScript
sont
valables
uniquement
côté
client
Pour
des
raisons
de
sécurité
il
faut
réeffectuer
complètement
toutes
les
vérifications
côté
serveur
PHP
met
pour
cela
à
la
disposition
des
programmeurs
tout
un
ensemble
de
filtres
La
première
des
vérifications
consiste
à
bien
prendre
en
compte
les
caractères
spéciaux
Gestion
des
caractères
spéciaux
Les
magic
quotes
Avant
PHP
une
directive
concernant
ces
magic
quotes
existait
Si
dans
le
fichier
de
configuration
de
PHP
la
directive
magic
quotes
gpc
etait
activée
PHP
modifiait
automatiquement
certaines
entrées
de
formulaires
en
procédant
à
des
protections
de
certains
caractères
spéciaux
par
des
insertion
de
backslashes
Par
exemple
—
les
caractères
accentués
—
les
apostrophes
—
les
backslashes
Filtrage
en
PHP
Cours
PHP
Accéléré
Version
Un
peu
à
la
manière
de
la
fonction
addslashes
Cette
protection
était
destinée
à
préparer
les
données
avant
des
requêtes
SQL
pour
empêcher
une
éventuelle
injection
SQL
Ce
comportement
automatique
est
toutefois
parfois
gênant
si
on
veut
simplement
réafficher
les
chaines
saisies
et
non
pas
les
utiliser
dans
des
requêtes
SQL
En
outre
on
ne
veut
pas
toujours
protéger
les
chaines
de
la
même
façon
selon
l
usage
qu
on
veut
en
faire
par
la
suite
On
peut
vouloir
dans
certains
cas
protéger
des
chaines
par
exemple
—
htmlspecialchars
pour
éviter
des
injections
de
code
HTML
—
PDO
quote
pour
se
protéger
d
injections
SQL
php
pdo
new
PDO
sqlite
tmp
mydb
sqlite
string
Orléans
print
Chaîne
sans
quotes
string
n
print
Chaîne
avec
quotes
pdo
quote
string
n
Cela
ne
vous
dispense
pas
d
utiliser
les
PreparedStatement
vus
précédemment
Les
filtres
PHP
Les
plus
directs
à
utiliser
sur
les
formulaires
sont
basés
sur
la
fonction
filter
input
avec
en
paramètre
INPUT
GET
ou
INPUT
POST
Voici
quelques
exemples
typiques
php
entier
filter
input
INPUT
POST
var
FILTER
SANITIZE
NUMBER
INT
url
filter
input
INPUT
POST
var
FILTER
VALIDATE
URL
if
filter
input
INPUT
GET
email
FILTER
VALIDATE
EMAIL
echo
Email
non
valide
else
echo
Email
valide
On
peut
aussi
filtrer
des
carctères
spéciaux
php
search
html
filter
input
INPUT
GET
search
FILTER
SANITIZE
SPECIAL
CHARS
search
url
filter
input
INPUT
GET
search
FILTER
SANITIZE
ENCODED
echo
Vous
avez
recherché
search
html
n
echo
a
href
search
search
url
Nouvelle
recherche
a
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Gestion
des
transactions
avec
PDO
Problème
Une
série
de
requêtes
SQL
sont
logiquement
liées
entre
elles
et
on
voudrait
qu
elles
soient
toutes
exécutées
ou
aucune
En
effet
dans
certains
cas
la
prise
en
compte
d
une
partie
des
requêtes
seulement
peut
conduire
à
une
incohérence
dans
le
système
d
information
La
base
de
données
peut
ainsi
être
corrompue
et
très
difficile
à
rectifier
par
la
suite
Par
exemple
si
on
a
requêtes
qui
se
suivent
et
qui
sont
liées
php
require
connexion
php
connexion
connect
bd
stmt
pdo
prepare
UPDATE
compte
SET
solde
solde
montant
WHERE
nom
nom
stmt
pdo
prepare
UPDATE
compte
SET
solde
solde
montant
WHERE
nom
nom
Retrait
du
Compte
cpte
Compte
montant
stmt
bindParam
nom
cpte
stmt
bindParam
solde
montant
PDO
PARAM
INT
stmt
execute
Credit
du
Compte
cpte
Compte
depot
stmt
bindParam
nom
cpte
stmt
bindParam
montant
depot
PDO
PARAM
INT
stmt
execute
Ceci
peut
conduire
à
un
problème
en
cas
d
interruption
de
cette
séquence
En
particulier
le
Compte
peut
avoir
été
débité
sans
que
le
Compte
soit
crédité
On
peut
résoudre
cette
fragilité
en
utilisant
une
transaction
php
require
connexion
php
connexion
connect
bd
suite
sur
la
page
suivante
Gestion
des
transactions
avec
PDO
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
stmt
connexion
prepare
UPDATE
compte
SET
solde
solde
solde
WHERE
nom
nom
stmt
connexion
prepare
UPDATE
compte
SET
solde
solde
montant
WHERE
nom
nom
On
commence
la
transaction
connexion
beginTransaction
Retrait
du
Compte
cpte
Compte
montant
stmt
bindParam
nom
cpte
stmt
bindParam
solde
montant
PDO
PARAM
INT
stmt
execute
Credit
du
Compte
cpte
Compte
depot
stmt
bindParam
nom
cpte
stmt
bindParam
montant
depot
PDO
PARAM
INT
stmt
execute
on
termine
la
transaction
connexion
commit
Si
la
séquence
échoue
PDO
commandera
un
RollBack
automatique
c
est
à
dire
une
annulation
de
toute
la
transaction
Connexion
persistante
avec
PDO
Pour
créer
une
connexion
persistante
avec
PDO
il
suffit
d
utiliser
l
attribut
ATTR
PERSISTENT
à
l
instanciation
de
l
objet
PDO
Lors
des
appels
ultérieurs
si
les
paramètres
de
création
sont
identiques
l
objet
déjà
créé
sera
simplement
réutilisé
php
function
connect
db
dsn
mysql
dbname
BASE
host
SERVER
try
connexion
new
PDO
dsn
USER
PASSWD
array
PDO
ATTR
PERSISTENT
true
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
catch
PDOException
e
printf
Échec
de
la
connexion
s
n
e
getMessage
exit
return
connexion
Validation
et
contrôle
d
entrées
avec
GUMP
On
peut
également
utiliser
des
librairies
aidant
à
gérer
la
validation
comme
GUMP
https
github
com
Wixel
GUMP
Pour
installer
Créons
un
fichier
composer
json
dans
notre
répertoire
de
travail
require
wixel
gump
dev
master
Puis
utilisons
l
outil
PHP
composer
pour
installer
les
composants
demandés
composer
update
Nous
pouvons
utiliser
Gump
pour
vérifier
des
entrées
php
require
vendor
wixel
gump
gump
class
php
is
valid
GUMP
is
valid
POST
array
username
required
alpha
numeric
password
required
max
len
min
len
if
is
valid
echo
valid
username
and
password
else
print
r
is
valid
suite
sur
la
page
suivante
Validation
et
contrôle
d
entrées
avec
GUMP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
ou
de
manière
plus
détaillée
php
require
vendor
wixel
gump
gump
class
php
if
SERVER
REQUEST
METHOD
POST
validator
new
GUMP
name
POST
name
password
POST
password
POST
array
name
name
password
password
néttoie
les
données
et
convertit
les
chaines
en
utf
si
besoin
POST
validator
sanitize
POST
Définissons
les
règles
et
les
filtres
rules
array
name
required
alpha
numeric
max
len
min
len
password
required
max
len
min
len
filters
array
name
trim
sanitize
string
password
trim
base
encode
On
applique
les
filtres
POST
validator
filter
POST
filters
On
valide
is
valid
validator
validate
POST
rules
On
vérifie
le
résultat
if
is
valid
true
echo
name
echo
password
exit
else
echo
Erreurs
détectées
dans
les
entrées
n
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
on
affiche
les
erreurs
en
html
echo
validator
get
readable
errors
true
Http
et
la
conservation
d
informations
sur
les
clients
Problème
Le
protocole
HTTP
est
un
protocole
sans
mémoire
Une
requête
d
un
client
ou
les
informations
qui
y
sont
rattachées
ne
sont
pas
mémorisées
par
défaut
Plusieurs
techniques
ont
été
développées
pour
remédier
à
ce
manque
—
Envoyer
de
l
information
sur
l
URL
—
Utiliser
un
champ
caché
HTML
—
Utiliser
des
Cookies
—
Utiliser
des
Sessions
Envoi
d
information
sur
l
URL
Considérons
une
première
page
page
php
doctype
html
html
lang
fr
head
meta
charset
utf
title
Formulaires
title
head
body
php
if
isset
GET
login
form
method
GET
action
php
echo
SERVER
PHP
SELF
p
Login
input
type
text
name
login
p
input
type
submit
value
Valider
form
php
else
header
Location
page
php
login
GET
login
suite
sur
la
page
suivante
Http
et
la
conservation
d
informations
sur
les
clients
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
body
html
qui
se
poursuit
par
une
page
doctype
html
html
lang
fr
head
meta
charset
utf
title
Formulaires
title
head
body
php
if
isset
GET
login
echo
GET
login
else
header
Location
page
php
body
html
Exécution
Passage
d
info
sur
l
URL
Utiliser
des
cookies
L
information
est
stockée
dans
un
petit
fichier
texte
sur
le
navigateur
du
client
On
peut
par
exemple
s
en
servir
pour
stocker
un
identifiant
de
session
un
login
un
compteur
de
visites
ou
encore
mesurer
un
temps
de
connexion
php
if
isset
COOKIE
compteur
message
Vous
etes
deja
venu
COOKIE
compteur
fois
br
n
valeur
COOKIE
compteur
else
message
Je
vous
met
un
petit
cookie
br
n
valeur
setCookie
compteur
valeur
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
echo
message
Exécution
Cookies
en
PHP
Mais
si
on
a
des
informations
en
plus
grand
nombre
à
stocker
ou
qui
revètent
un
caractère
plus
sensible
on
préférera
les
stocker
essentiellement
côté
serveur
et
utiliser
le
mécanisme
plus
complet
des
sessions
Celui
ci
consiste
à
utiliser
le
tableau
associatif
SESSION
qui
permet
de
stocker
toute
sorte
d
informations
associées
à
ce
client
données
de
type
nombres
ou
chaines
tableaux
ou
objets
PHP
Considérons
une
première
page
mettant
en
place
une
session
php
session
php
session
start
if
isset
SESSION
cpt
SESSION
cpt
else
SESSION
cpt
echo
Vous
avez
vu
cette
page
SESSION
cpt
fois
br
n
echo
Le
SID
courant
est
session
id
echo
br
a
href
session
php
Aller
à
la
page
suivante
session
php
a
Puis
on
va
relire
les
informations
stockées
en
variables
de
session
dans
une
autre
page
php
session
php
session
start
if
isset
SESSION
cpt
SESSION
cpt
else
SESSION
cpt
echo
bonjour
SESSION
login
br
n
echo
vous
avez
vu
cette
page
SESSION
cpt
fois
br
n
echo
Votre
SID
est
toujours
session
id
echo
br
a
href
session
php
Retour
a
session
php
a
Exécution
Utilisation
variable
de
session
PHP
Http
et
la
conservation
d
informations
sur
les
clients
Cours
PHP
Accéléré
Version
Champs
cachés
Un
quatrième
mécanisme
est
employé
pour
conserver
de
l
information
dans
des
pages
Web
elles
mêmes
comme
l
utilisation
de
champs
cachés
input
de
type
hidden
Ces
champs
peuvent
par
exemple
servir
à
stocker
dans
des
formulaires
HTML
un
champ
spécial
dit
csrf
token
qui
contiendra
un
identifiant
unique
temporaire
pour
se
prémunir
des
attaques
de
type
CSRF
Cross
Site
Request
Forgery
dont
un
exemple
est
l
envoi
d
un
mail
contenant
une
image
a
quelqu
un
et
cette
image
est
en
fait
un
lien
vers
une
page
d
administration
sur
laquelle
le
destinataire
du
mail
a
des
droits
particuliers
comme
editer
ou
supprimer
une
ressource
Cette
page
pourra
déclencher
une
suppression
ou
une
modification
de
contenu
non
souhaitée
Les
principaux
Frameworks
Web
comme
Symfony
Laravel
en
PHP
ou
Django
Flask
en
Python
prennent
en
charge
la
génération
automatique
de
ce
token
et
sa
mise
en
variable
de
session
mais
il
faut
tout
de
même
l
appeler
dans
les
formulaires
ou
lors
de
l
utilisation
d
Ajax
Manipuler
XML
avec
PHP
Le
format
XML
est
utilisé
de
façon
très
variée
Nous
le
trouvons
dans
des
services
Web
des
fichiers
de
configuration
des
formats
comme
SVG
MathML
docx
odt
etc
Sa
manipulation
dans
un
langage
comme
PHP
est
donc
particulièrement
importante
On
peut
manipuler
XML
de
différentes
manières
—
A
la
main
—
Avec
XMLWriter
XMLReader
—
Avec
DOM
—
Avec
SimpleXML
ou
des
combinaisons
de
ces
méthodes
—
DOM
ou
Document
Object
Model
est
une
méthode
qui
recrée
toute
l
arborescence
d
un
document
XML
sous
forme
d
objets
PHP
Son
utilisation
est
simple
mais
elle
est
cou
teuse
en
ressources
en
temps
d
exécution
et
un
peu
verbeuse
—
XMLWriter
et
XMLReader
traitent
les
fichiers
XML
a
plus
bas
niveau
mais
leur
uti
lisation
exclusive
rend
parfois
le
code
délicat
à
implémenter
surtout
pour
la
lecture
de
fichiers
complexes
—
SimpleXML
représente
une
sorte
de
compromis
Simplicité
Performance
—
Traiter
des
fichiers
xml
à
la
main
est
généralement
à
éviter
sauf
pour
créer
des
fichiers
très
simples
Traitement
de
fichiers
XML
à
la
main
Observons
d
abord
comment
créer
un
fichier
XML
contenant
une
liste
de
programmes
TV
La
lecture
de
fichiers
XML
sans
API
est
peu
recommandée
php
header
Content
Type
text
xml
print
xml
version
n
print
programmes
n
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
programmes
array
array
nom
Simpsons
chaine
TF
debut
duree
array
nom
Blake
et
Mortimer
chaine
M
debut
duree
foreach
programmes
as
show
print
t
show
n
foreach
show
as
tag
data
print
t
tag
htmlspecialchars
data
t
tag
n
print
show
n
print
programmes
n
Exécution
Ecriture
XML
à
la
main
Resultat
brut
html
xml
version
programmes
show
nom
Simpsons
nom
chaine
TF
chaine
debut
debut
duree
duree
show
show
nom
Blake
et
Mortimer
nom
chaine
M
chaine
debut
debut
duree
duree
show
programmes
Ecriture
avec
XMLWriter
Un
exemple
simple
pour
démarrer
Manipuler
XML
avec
PHP
Cours
PHP
Accéléré
Version
php
xml
new
XMLWriter
xml
openURI
test
xml
xml
startElement
toto
xml
writeElement
url
http
totototo
com
xml
endElement
xml
flush
Resultat
brut
toto
url
http
toto
com
url
toto
et
si
on
récupère
des
données
de
la
table
CARNET
pour
les
exporter
en
XML
php
require
once
connexion
php
connexion
connect
bd
sql
SELECT
from
CARNET
data
connexion
query
sql
xml
new
XMLWriter
xml
openUri
contacts
xml
xml
startDocument
utf
xml
startElement
mescontacts
while
pers
data
fetch
xml
startElement
contact
xml
writeAttribute
id
pers
ID
xml
writeElement
prenom
pers
PRENOM
xml
writeElement
nom
pers
NOM
xml
writeElement
naissance
pers
NAISSANCE
xml
endElement
xml
endElement
xml
endElement
xml
flush
Resultat
xml
version
encoding
UTF
mescontacts
contact
id
prenom
JOHN
prenom
nom
SMITH
nom
naissance
naissance
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
contact
contact
id
prenom
JEAN
prenom
nom
DURAND
nom
naissance
naissance
contact
contact
id
prenom
JEANNE
prenom
nom
GUDULE
nom
naissance
naissance
contact
contact
id
prenom
EMILIO
prenom
nom
ZAPATA
nom
naissance
naissance
contact
contact
id
prenom
NICOLAS
prenom
nom
JOURDAIN
nom
naissance
naissance
contact
contact
id
prenom
MARIE
prenom
nom
DUPUY
nom
naissance
naissance
contact
contact
id
prenom
LOU
prenom
nom
ANDREAS
nom
naissance
naissance
contact
contact
id
prenom
Franz
prenom
nom
Kafka
nom
naissance
naissance
contact
contact
id
prenom
Joe
prenom
nom
Dalton
nom
naissance
naissance
contact
mescontacts
Traitements
avec
DOM
Ecriture
de
fichier
XML
avec
DOM
en
utilisant
des
données
provenant
d
une
Base
de
Données
Partons
de
la
table
films
suivante
Manipuler
XML
avec
PHP
Cours
PHP
Accéléré
Version
CREATE
TABLE
IF
NOT
EXISTS
films
code
filmìnt
NOT
NULL
AUTO
INCREMENT
titre
original
varchar
DEFAULT
NULL
titre
francais
varchar
DEFAULT
NULL
pays
varchar
DEFAULT
NULL
dateìnt
DEFAULT
NULL
dureeìnt
DEFAULT
NULL
couleur
varchar
DEFAULT
NULL
realisateurìnt
DEFAULT
NULL
ìmagè
varchar
DEFAULT
NULL
PRIMARY
KEY
code
film
et
créons
un
fichier
XML
avec
les
données
de
cette
table
en
utilisant
DOM
php
avec
le
fichier
connexion
php
utilisé
auparavant
require
connexion
php
connexion
connect
bd
sql
SELECT
from
films
limit
data
connexion
query
sql
if
data
document
new
DomDocument
document
preserveWhiteSpace
false
document
formatOutput
true
on
crée
la
racine
lesfilms
et
on
l
insère
dans
le
document
lesfilms
document
createElement
lesfilms
document
appendChild
lesfilms
On
boucle
pour
tous
les
films
trouvés
dans
la
BD
while
unfilm
data
fetch
PDO
FETCH
OBJ
film
document
createElement
film
film
setAttribute
idreal
unfilm
realisateur
lesfilms
appendChild
film
on
crée
l
élément
title
et
on
l
ajoute
à
film
title
document
createElement
titre
film
appendChild
title
on
définit
le
texte
pour
title
text
document
createTextNode
utf
encode
unfilm
titre
original
title
appendChild
text
crée
et
ajoute
le
realisateur
a
film
realisateur
document
createElement
date
id
document
createTextNode
unfilm
date
realisateur
appendChild
id
film
appendChild
realisateur
document
save
myFilms
xml
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
echo
Export
XML
fini
else
echo
Aucun
film
dans
la
base
Exécution
Creation
XML
avec
DOM
Resultat
xml
version
lesfilms
film
idreal
titre
Pandora
and
the
flying
Dutchman
titre
date
date
film
film
idreal
titre
Johnny
Guitar
titre
date
date
film
film
idreal
titre
Woman
under
the
Influence
A
titre
date
date
film
film
idreal
titre
Apartment
The
titre
date
date
film
film
idreal
titre
Victor
Victoria
titre
date
date
film
film
idreal
titre
Modern
Times
titre
date
date
film
film
idreal
suite
sur
la
page
suivante
Manipuler
XML
avec
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
titre
M
xC
xA
pris
Le
titre
date
date
film
film
idreal
titre
Jour
de
f
xC
xAA
te
titre
date
date
film
film
idreal
titre
Olvidados
Los
titre
date
date
film
film
idreal
titre
West
Side
Story
titre
date
date
film
lesfilms
Relecture
avec
SimpleXML
php
lesfilms
simplexml
load
file
myFilms
xml
foreach
lesfilms
film
as
film
echo
Titre
utf
decode
film
titre
br
n
foreach
film
attributes
as
a
b
echo
a
b
n
print
Annee
film
annee
br
n
Exécution
Lecture
XML
avec
SimpleXML
Resultat
brut
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Titre
Pandora
and
the
flying
Dutchman
br
idreal
Annee
br
Titre
Johnny
Guitar
br
idreal
Annee
br
Titre
Woman
under
the
Influence
A
br
idreal
Annee
br
Titre
Apartment
The
br
idreal
Annee
br
Titre
Victor
Victoria
br
idreal
Annee
br
Titre
Modern
Times
br
idreal
Annee
br
Titre
Mépris
Le
br
idreal
Annee
br
Titre
Jour
de
fête
br
idreal
Annee
br
Titre
Olvidados
Los
br
idreal
Annee
br
Titre
West
Side
Story
br
idreal
Annee
br
Architecture
de
type
MVC
avec
PHP
Problème
Lorsqu
un
projet
augmente
le
besoin
de
s
organiser
et
de
permettre
plus
de
réutilisabilité
et
de
lisibilité
demande
une
certaine
méthode
MVC
Modèle
Vue
Controleur
peut
être
une
solution
Architecture
de
type
MVC
avec
PHP
Cours
PHP
Accéléré
Version
intéressante
Nous
allons
commencer
à
nous
familiariser
avec
les
composants
d
un
Framework
MVC
et
à
voir
l
utilité
de
recourir
à
de
tels
outils
Une
introduction
générale
à
ce
sujet
se
trouve
ici
http
sym
fony
com
doc
current
book
from
flat
php
to
symfony
html
Du
PHP
pur
aux
templates
PHP
Considérons
le
code
suivant
en
interrogeant
la
table
CARNET
vue
précemment
depuis
PHP
avec
PDO
php
require
connect
php
dsn
mysql
dbname
BASE
host
SERVER
try
connexion
new
PDO
dsn
USER
PASSWD
catch
PDOException
e
printf
Echec
connexion
s
n
e
getMessage
exit
sql
SELECT
from
CARNET
if
connexion
query
sql
echo
Pb
pour
acceder
au
CARNET
else
foreach
connexion
query
sql
as
row
echo
row
NOM
br
n
On
peut
observer
quelques
défauts
dans
le
code
ci
dessus
—
Réutilisabilté
du
code
très
réduite
—
Si
on
fabrique
un
formulaire
avec
les
entrées
du
carnet
où
doit
on
mettre
le
code
correspondant
Un
template
PHP
On
peut
améliorer
un
peu
les
choses
php
require
connect
php
dsn
mysql
dbname
BASE
host
SERVER
try
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
connexion
new
PDO
dsn
USER
PASSWD
catch
PDOException
e
printf
Echec
connexion
s
n
e
getMessage
exit
sql
SELECT
from
CARNET
if
connexion
query
sql
echo
Pb
pour
acceder
au
CARNET
else
amis
Array
foreach
connexion
query
sql
as
row
amis
row
require
templates
listeamis
php
Avec
un
template
listeamis
php
à
placer
dans
templates
listeamis
php
DOCTYPE
html
html
head
title
Liste
de
mes
Amis
title
head
body
h
List
of
friends
h
ul
php
foreach
amis
as
ami
li
a
href
recherche
nom
php
echo
ami
ID
a
li
php
endforeach
ul
body
html
On
commence
ainsi
à
séparer
la
présentation
du
codage
métier
Isolons
la
logique
applicative
php
modele
php
require
connect
php
suite
sur
la
page
suivante
Architecture
de
type
MVC
avec
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
function
connect
db
dsn
mysql
dbname
BASE
host
SERVER
try
connexion
new
PDO
dsn
USER
PASSWD
catch
PDOException
e
printf
Echec
connexion
s
n
e
getMessage
exit
return
connexion
Puis
function
get
all
friends
connexion
connect
db
amis
Array
sql
SELECT
from
CARNET
foreach
connexion
query
sql
as
row
amis
row
return
amis
On
peut
maintenant
avoir
un
controleur
très
simple
qui
interroge
le
modèle
puis
passe
les
données
au
template
pour
affichage
php
c
list
php
require
once
modele
php
amis
get
all
friends
require
templates
listamis
php
Layout
Il
reste
une
partie
non
réutilisable
dans
le
code
à
savoir
le
layout
Essayons
de
remédier
à
ça
templates
baseLayout
php
DOCTYPE
html
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
html
head
title
php
echo
title
title
head
body
php
echo
content
body
html
Héritage
de
templates
php
templates
t
list
php
title
Liste
des
amis
ob
start
h
List
de
mes
amis
h
ul
php
foreach
amis
as
ami
li
a
href
recherche
nom
php
echo
ami
nom
php
echo
ami
VILLE
a
li
php
endforeach
ul
php
content
ob
get
clean
include
baseLayout
php
Observez
l
utilisation
de
la
bufferisation
avec
ob
start
et
ob
get
clean
Cette
dernière
fonction
récupère
le
contenu
bufferisé
et
nettoie
ensuite
le
buffer
Affichage
des
détails
d
une
personne
On
va
ajouter
à
notre
modèle
une
fonction
pour
afficher
les
détails
d
une
personne
php
function
get
friend
by
id
id
connexion
connect
bd
sql
SELECT
from
CARNET
where
ID
id
stmt
connexion
prepare
sql
stmt
bindParam
id
id
PDO
PARAM
INT
stmt
execute
suite
sur
la
page
suivante
Architecture
de
type
MVC
avec
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
return
stmt
fetch
On
peut
maintenant
créer
un
nouveau
controleur
c
details
php
php
c
details
php
require
once
modele
php
pers
get
friend
by
id
GET
id
require
templates
t
details
php
Qui
utilise
le
template
php
templates
t
details
php
title
pers
NOM
ob
start
h
details
sur
php
echo
pers
PRENOM
pers
NOM
h
p
php
echo
Ne
le
pers
NAISSANCE
echo
br
Ville
pers
VILLE
content
ob
get
clean
include
baseLayout
php
Vous
pouvez
tester
en
entrant
l
URL
de
c
details
php
avec
un
paramètre
id
Le
code
est
similaire
à
celui
du
premier
template
et
nous
pouvons
réutiliser
le
template
de
base
mais
il
subsiste
plusieurs
problèmes
—
Si
le
paramètre
id
n
est
pas
fourni
notre
application
va
provoquer
une
erreur
—
Nous
n
avons
pas
de
controleur
principal
Regroupons
d
abord
le
code
des
contrôleurs
c
list
php
et
c
details
php
dans
un
fichier
unique
controllers
php
php
controllers
php
function
list
action
amis
get
all
friends
require
templates
t
list
php
function
detail
action
id
pers
get
friend
by
id
id
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
require
templates
t
detail
php
Nous
pouvons
enfin
proposer
un
controleur
principal
Front
Controller
index
php
php
index
php
On
charge
les
modeles
et
les
controleurs
require
once
modele
php
require
once
controllers
php
gestion
des
routes
uri
parse
url
SERVER
REQUEST
URI
PHP
URL
PATH
if
index
php
uri
list
action
elseif
index
php
detail
uri
isset
GET
id
detail
action
GET
id
else
header
Status
Not
Found
echo
html
body
h
Page
Not
Found
h
body
html
Nous
avons
maintenant
une
structure
de
ce
type
connect
php
connexion
php
controlleur
php
modele
php
recherche
php
templates
layout
php
listeamis
php
On
peut
améliorer
tout
cela
en
intégrant
dans
un
même
Objet
tout
le
modèle
Voir
sur
github
roza
php
basic
mvc
https
github
com
roza
php
basic
mvc
pour
le
code
complet
Mais
ce
système
de
routage
est
encore
très
incomplet
et
nous
allons
plutôt
utliser
pour
continuer
les
outils
d
un
framework
Web
de
référence
Symfony
Templates
Twig
en
PHP
L
installation
de
Twig
se
fait
grâce
à
l
outil
composer
Templates
Twig
en
PHP
Cours
PHP
Accéléré
Version
composer
Installons
d
abord
l
outil
composer
qui
servira
à
beaucoup
de
tâches
courantes
dans
un
projet
PHP
On
va
d
abord
créer
un
répertoire
bin
à
la
racine
de
notre
HOME
placez
y
l
exécutable
composer
phar
et
renommez
le
composer
cd
mkdir
bin
cd
bin
curl
s
https
getcomposer
org
installer
php
mv
composer
phar
composer
Vérifiez
la
définition
de
vos
variables
d
environnement
http
proxy
et
https
proxy
dans
votre
bashrc
Ajoutez
également
la
ligne
suivante
à
votre
bashrc
export
PATH
PATH
bin
de
manière
à
ce
que
tous
les
programmes
installés
dans
le
répertoire
bin
de
votre
HOME
soient
accessibles
de
n
importe
où
Installation
Installons
Twig
code
block
none
composer
require
twig
twig
Ceci
créera
dans
le
répertoire
courant
un
dossier
vendor
contenant
les
librairies
demandées
On
définit
d
abord
un
template
de
base
BaseTemplate
html
DOCTYPE
html
html
lang
fr
head
block
head
meta
charset
utf
link
rel
stylesheet
href
style
css
title
block
title
endblock
title
endblock
head
body
section
id
content
block
content
endblock
section
footer
id
footer
block
footer
copy
Copyright
a
href
http
monsite
com
Mon
super
Site
a
endblock
footer
body
html
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Puis
un
template
plus
spécialisé
qui
en
hérite
menu
html
extends
BaseTemplate
html
block
title
Menu
de
la
semaine
endblock
block
head
parent
style
type
text
css
important
color
style
endblock
block
content
h
Menu
h
p
class
important
Voici
votre
menu
de
la
semaine
dl
dt
Lundi
dt
dd
Lundi
dd
dt
Mardi
dt
dd
Mardi
dd
dt
Mercredi
dt
dd
Mercredi
dd
dt
Jeudi
dt
dd
Jeudi
dd
dl
p
endblock
Enfin
on
utilise
ce
template
dans
un
fichier
menu
php
en
chargeant
d
abord
l
”
autoloader
php
inclure
l
autoloader
include
vendor
autoload
php
try
Définir
le
dossier
ou
on
trouve
les
templates
loader
new
Twig
Loader
Filesystem
templates
initialiser
l
environement
Twig
twig
new
Twig
Environment
loader
charger
le
template
template
twig
loadTemplate
menu
html
Affecter
les
variables
du
template
et
appeller
le
rendu
echo
template
render
array
Lundi
Steak
Frites
Mardi
Raviolis
Mercredi
Pot
au
Feu
Jeudi
Couscous
Vendredi
Poisson
catch
Exception
e
die
ERROR
e
getMessage
suite
sur
la
page
suivante
Templates
Twig
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Affichage
des
personnes
du
Carnet
Affichons
à
présent
les
personnes
du
Carnet
à
l
aide
d
un
template
Twig
On
réutilise
le
fichier
modele
php
vu
précédemment
php
modele
php
class
Carnet
private
static
connexion
function
construct
dsn
mysql
dbname
BASE
host
SERVER
try
self
connexion
new
PDO
dsn
USER
PASSWD
catch
PDOException
e
printf
Échec
de
la
connexion
s
n
e
getMessage
this
connexion
NULL
Récupére
la
liste
des
contacts
sous
forme
d
un
tableau
function
get
all
friends
sql
SELECT
from
CARNET
data
self
connexion
query
sql
return
data
Ajoute
un
contact
à
la
table
CARNET
function
add
friend
data
sql
INSERT
INTO
CARNET
NOM
PRENOM
NAISSANCE
VILLE
values
stmt
self
connexion
prepare
sql
return
stmt
execute
array
data
nom
data
prenom
data
naissance
data
ville
Récupére
un
contact
à
partir
de
son
ID
function
get
friend
by
id
id
sql
SELECT
from
CARNET
where
ID
id
stmt
self
connexion
prepare
sql
stmt
bindParam
id
id
PDO
PARAM
INT
stmt
execute
return
stmt
fetch
PDO
FETCH
OBJ
php
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
fichier
carnet
php
include
vendor
autoload
php
on
inclus
le
modele
include
modele
php
On
instancie
un
Carnet
car
new
Carnet
try
Indiquer
le
dossier
ou
on
trouve
les
templates
loader
new
Twig
Loader
Filesystem
templates
initialiser
l
environement
Twig
twig
new
Twig
Environment
loader
Récupérer
les
données
depuis
la
base
amis
car
get
all
friends
Charger
le
template
template
twig
loadTemplate
carnet
html
titre
Liste
des
membres
du
carnet
trié
par
ville
echo
template
render
array
titre
titre
amis
amis
catch
Exception
e
die
ERROR
e
getMessage
et
un
template
carnet
html
extends
BaseTemplate
html
block
title
Personnes
du
Carnet
endblock
block
head
parent
style
type
text
css
important
color
style
endblock
block
content
p
align
center
class
Style
titre
p
table
border
align
center
cellspacing
cellpadding
tr
bgcolor
CA
td
width
strong
numero
strong
td
td
width
strong
Nom
strong
td
td
width
strong
Prenom
strong
td
td
width
strong
Age
strong
td
suite
sur
la
page
suivante
Templates
Twig
en
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
td
width
strong
Ville
strong
td
tr
set
i
for
ami
in
amis
set
i
i
if
i
is
odd
tr
bgcolor
F
F
F
else
tr
bgcolor
A
A
A
endif
td
ami
ID
td
td
ami
NOM
td
td
ami
PRENOM
td
td
ami
NAISSANCE
td
td
ami
VILLE
td
tr
endfor
table
endblock
Ce
template
est
un
peu
maladroit
mais
il
montre
l
expressivité
du
langage
de
template
Twig
avec
des
boucles
des
conditionnelles
calculs
avec
des
variables
etc
Nous
pouvons
bien
sûr
en
proposer
un
plus
simple
avec
le
CSS
adéquat
Affichage
des
Personnes
avec
un
template
plus
simple
carnet
html
extends
BaseTemplate
html
block
title
Personnes
du
Carnet
endblock
block
head
parent
link
rel
stylesheet
href
static
css
tabstyle
css
endblock
block
content
h
titre
h
table
id
jolie
class
centre
tr
td
numero
td
td
Nom
td
td
Prenom
td
td
Age
td
td
Ville
td
tr
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
for
ami
in
amis
tr
td
ami
ID
td
td
ami
NOM
td
td
ami
PRENOM
td
td
ami
NAISSANCE
td
td
ami
VILLE
td
tr
endfor
table
endblock
avec
le
style
qui
va
bien
sur
les
tableaux
Nous
pouvons
ainsi
compléter
le
développement
MVC
effectué
précédemment
en
utilisant
des
templates
Twig
Voir
sur
github
roza
php
basic
mvc
https
github
com
roza
php
basic
mvc
pour
un
code
plus
complet
Mais
le
système
de
routage
employé
est
encore
très
rudimentaire
et
nous
allons
plutôt
utliser
les
outils
d
un
framework
Web
de
référence
Symfony
pour
aller
plus
loin
Composer
Symfony
et
Flex
Nous
allons
à
présent
nous
familiariser
avec
les
outils
et
composants
d
un
Framework
de
réfé
rence
Symfony
qui
est
très
modulaire
et
permet
d
installer
des
composants
très
riches
comme
SwiftMailer
pour
envoyer
des
mails
FOSUserBundle
pour
gérer
des
utilisateurs
FOSREST
Bundle
ou
APIPlatform
pour
réaliser
rapidement
une
API
complète
Le
Framework
Symfony
est
basé
sur
un
Micro
noyau
Micro
Kernel
plus
léger
que
le
noyau
de
Symfony
Une
introduction
générale
à
ce
framework
se
trouve
ici
https
symfony
com
La
gestion
des
dépendances
se
fait
à
présent
grâce
à
l
outil
Symfony
Flex
qui
permet
d
établir
des
recettes
ou
recipes
décrivant
les
dépendances
et
la
configuration
d
un
projet
L
outil
de
base
est
composer
Indication
Composer
permet
d
installer
des
centaines
de
packages
librement
disponibles
On
les
trouve
sur
Packagist
https
packagist
org
Il
permet
de
gérer
les
dépendances
d
un
projet
et
également
de
créer
le
squellette
d
une
application
Symfony
composer
Installons
d
abord
l
outil
composer
qui
servira
à
beaucoup
de
tâches
courantes
dans
un
projet
PHP
On
va
d
abord
créer
un
répertoire
bin
à
la
racine
de
notre
HOME
placez
y
l
exécutable
composer
phar
et
renommez
le
composer
Composer
Symfony
et
Flex
Cours
PHP
Accéléré
Version
cd
mkdir
bin
cd
bin
curl
s
https
getcomposer
org
installer
php
mv
composer
phar
composer
Vérifiez
la
définition
de
vos
variables
d
environnement
http
proxy
et
https
proxy
dans
votre
bashrc
Ajoutez
également
la
ligne
suivante
à
votre
bashrc
export
PATH
PATH
bin
de
manière
à
ce
que
tous
les
programmes
installés
dans
le
répertoire
bin
de
votre
HOME
soient
accessibles
de
n
importe
où
Si
on
veux
juste
installer
un
composant
simple
comme
HTTP
Foundation
on
place
à
la
racine
du
dossier
de
travail
le
fichier
composer
json
suivant
require
symfony
http
foundation
Ceci
indique
que
nous
n
installons
pour
l
instant
que
ce
seul
composant
et
que
nous
demandons
la
dernière
version
stable
de
la
branche
pour
http
foundation
Puis
utilisons
composer
pour
installer
les
composants
demandés
composer
update
o
Notez
l
utilisation
de
l
option
o
pour
optimize
autoloader
qui
optimise
au
mieux
le
chargement
automatique
des
classes
HttpFoundation
Les
principaux
composants
de
HttpFoundation
à
savoir
Request
et
Response
sont
alors
prêts
à
l
emploi
Remarquez
l
usage
des
espaces
de
nommages
en
PHP
semblables
à
ceux
du
C
ou
aux
import
de
packages
en
java
pour
éviter
des
conflits
de
nommages
entre
différents
vendor
c
est
à
dire
différentes
entités
fournissant
du
code
à
votre
projet
php
chargement
autoloader
require
once
DIR
vendor
autoload
php
use
Symfony
Component
HttpFoundation
Request
use
Symfony
Component
HttpFoundation
Response
Actual
request
request
Request
createFromGlobals
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
fake
request
request
Request
create
essai
php
name
Zozo
URI
demandee
sans
les
parametres
path
request
getPathInfo
recup
GET
de
variables
nom
request
query
get
name
World
prenom
request
query
get
surname
Joe
echo
Bonjour
surname
name
br
On
peut
aussi
récupérer
d
autres
informations
sur
le
Client
et
fabriquer
une
réponse
php
recup
variables
SERVER
host
request
server
get
HTTP
HOST
get
COOKIES
request
cookies
get
PHPSESSID
HTTP
headers
headers
request
headers
get
host
content
type
request
headers
get
content
type
method
request
getMethod
GET
POST
PUT
DELETE
ou
HEAD
langs
request
getLanguages
IP
request
getClientIp
response
new
Response
IP
host
path
headers
content
type
method
nom
langs
response
send
Squellette
d
application
Symfony
Créons
un
répertoire
de
travail
mvc
sf
dans
votre
dossier
Web
par
exemple
www
ou
pu
blic
html
si
on
utilise
user
dir
d
Apache
ou
n
importe
où
si
on
utilise
le
serveur
Web
embar
qué
de
PHP
et
créons
la
trame
d
une
application
symfony
à
l
aide
de
composer
composer
create
project
symfony
skeleton
hello
sf
Veillez
à
bien
avoir
une
version
à
jour
de
composer
et
si
besoin
composer
self
update
La
structure
du
projet
ainsi
créé
est
la
suivante
Composer
Symfony
et
Flex
Cours
PHP
Accéléré
Version
hello
sf
bin
console
composer
json
composer
lock
config
bundles
php
packages
routes
yaml
services
yaml
public
index
php
src
Controller
Kernel
php
symfony
lock
var
cache
log
vendor
autoload
php
composer
psr
symfony
Le
répertoire
bin
contient
l
outil
console
qui
permet
d
effectuer
les
tâches
de
routine
pour
créer
ou
gérer
un
projet
Le
répertoire
config
contient
les
fichiers
de
configuration
Le
répertoire
public
contient
le
fichier
index
de
l
application
Le
dossie
src
les
controleurs
le
Kernel
mais
aussi
les
entités
etc
Le
dossier
var
contient
les
cache
et
les
logs
et
le
dossier
vendor
les
classes
des
Bundles
installés
comme
http
foundation
Vous
pouvez
consulter
le
fichier
symfony
lock
qui
se
trouve
à
la
racine
du
dossier
hello
sf
pour
voir
la
liste
des
dépendances
installées
psr
cache
version
psr
container
version
psr
log
version
psr
simple
cache
version
symfony
cache
version
v
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
symfony
config
version
v
symfony
console
version
recipe
repo
github
com
symfony
recipes
branch
master
version
ref
e
d
f
a
f
f
fe
a
c
symfony
debug
version
v
symfony
dependency
injection
version
v
symfony
dotenv
version
v
symfony
event
dispatcher
version
v
symfony
filesystem
version
v
symfony
finder
version
v
symfony
flex
version
recipe
repo
github
com
symfony
recipes
branch
master
version
ref
cc
afd
db
fbef
fe
b
ade
fac
symfony
framework
bundle
version
recipe
repo
github
com
symfony
recipes
branch
master
version
ref
c
c
bf
d
ca
a
e
c
d
symfony
http
foundation
suite
sur
la
page
suivante
Composer
Symfony
et
Flex
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
version
v
symfony
http
kernel
version
v
symfony
lts
version
dev
symfony
polyfill
mbstring
version
v
symfony
routing
version
recipe
repo
github
com
symfony
recipes
branch
master
version
ref
cda
b
d
d
a
acf
fe
e
symfony
yaml
version
v
Application
simple
Symfony
Complétons
à
présent
l
application
Symfony
Tester
une
application
PHP
TDD
Nous
allons
à
présent
nous
attaquer
à
une
problématique
fondamentale
dans
toute
application
qu
elle
soit
Web
mobile
ou
autres
Les
tests
TDD
TDD
veut
dire
Test
Driven
Development
c
est
à
dire
Développement
dirigé
par
les
tests
C
est
une
démarche
mise
en
avant
en
Méthodologie
Agile
Elle
consiste
en
général
en
l
application
des
points
suivants
—
écrire
un
test
—
vérifier
qu
il
échoue
car
le
code
qu
il
teste
n
existe
pas
—
écrire
juste
le
code
suffisant
pour
passer
le
test
—
vérifier
que
le
test
passe
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
—
procéder
à
un
refactoring
du
code
c
est
à
dire
l
améliorer
en
gardant
les
mêmes
fonctionnalités
Intérêt
de
la
démarche
Les
avantages
principaux
de
cette
démarche
sont
—
Préciser
au
mieux
les
spécifications
du
code
et
l
API
envisagée
—
Ceci
oblige
à
faire
des
choix
de
conception
qui
restent
parfois
trop
dans
le
flou
au
début
du
développement
—
Plus
tard
disposer
d
une
large
base
de
tests
est
une
riche
pour
une
application
car
elle
permet
de
vérifier
à
tout
moment
que
les
tests
installés
ne
sont
pas
mis
en
défaut
par
de
nouveaux
développements
ou
des
refactoring
de
code
Tous
les
langages
de
programmation
disposent
de
Frameworks
de
tests
Par
exemple
Java
offre
JUnit
PHP
quand
a
lui
propose
PHPUnit
On
peut
l
installer
via
composer
require
phpunit
phpunit
autoload
psr
Exemple
src
composer
phar
install
Ecrivons
à
présent
notre
premier
test
dans
le
dossier
Tests
php
use
Exemple
FileLoader
class
FileLoaderTest
extends
PHPUnit
Framework
TestCase
public
function
testFileLoaderClassCanBeCreated
f
new
FileLoader
Pour
tester
Placer
un
fichier
phpunit
xml
à
la
racine
de
votre
projet
contenant
xml
version
encoding
UTF
suite
sur
la
page
suivante
Tester
une
application
PHP
TDD
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
PHPUnit
Configuration
Fichier
de
configuration
standard
de
phpunit
phpunit
backupGlobals
false
backupStaticAttributes
false
colors
true
bootstrap
vendor
autoload
php
convertErrorsToExceptions
true
convertNoticesToExceptions
true
convertWarningsToExceptions
true
processIsolation
false
stopOnFailure
false
syntaxCheck
false
testsuites
testsuite
directory
tests
directory
testsuite
testsuites
phpunit
Nous
sommes
prêts
à
lancer
notre
premier
test
phpunit
Ecrivons
maintenant
un
peu
de
code
pour
nous
permettre
de
passer
notre
premier
test
Nous
allons
compléter
notre
test
par
une
vérification
qu
un
fichier
situé
dans
les
textit
fixtures
de
test
a
bien
été
chargé
php
class
FileLoaderTest
extends
PHPUnit
Framework
TestCase
public
function
testFileLoaderClassCanBeCreated
f
new
FileLoader
Nous
voulons
récupérer
le
contenu
d
un
fichier
via
une
méthode
get
public
function
testFileLoaderCanLoadFileContent
f
new
FileLoader
r
f
get
DIR
fixtures
simple
md
this
assertEquals
Foo
n
r
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Puis
si
nous
avons
besoin
de
Mock
Objects
nous
installerons
la
librairie
mockery
composer
require
dev
mockery
mockery
Mettre
en
place
un
Web
Service
REST
Problème
Dans
une
architecture
REST
classique
un
serveur
présente
les
données
d
une
table
et
un
Client
riche
ou
RIA
en
JavaScript
ou
un
client
Mobile
permet
de
les
récupérer
et
des
les
afficher
REST
signifie
Representational
State
Transfer
Cette
architecture
permet
de
réaliser
des
applications
de
type
onepage
en
reportant
sur
le
client
une
bonne
partie
de
la
logique
métier
et
en
offrant
des
point
d
entrée
aux
clients
pour
lire
des
données
sur
le
serveur
ou
lui
en
envoyer
Ces
données
pourront
être
envoyées
en
XML
ou
de
plus
en
plus
aujourd
hui
en
JSON
JavaScript
Object
Notation
c
est
à
dire
des
objets
directement
utilisables
en
JS
On
pose
les
définitions
suivantes
—
RIA
Rich
Internet
Application
—
REST
Representational
State
Transform
—
Logique
métier
déportée
vers
le
client
—
Tâche
principale
du
serveur
Offrir
des
services
de
récupération
et
de
stockage
de
données
Un
flux
de
news
pourra
ainsi
offrir
par
exemple
une
ressource
du
type
api
v
news
qui
permettra
aux
clients
de
récupérer
la
news
numéro
en
JSON
ou
en
XML
en
employant
la
méthode
HTTP
GET
dans
la
version
de
notre
API
Dans
cet
exemple
la
news
est
ici
la
ressource
ou
élément
manipulée
dans
l
API
version
La
méthode
GET
sera
employée
pour
récupérer
des
éléments
individuellement
ou
par
Collections
La
méthode
POST
sera
quand
à
elle
employée
pour
envoyer
vers
le
serveur
un
ou
plusieurs
élé
ments
D
autres
méthodes
HTTP
pour
créer
ou
modifier
complètement
PUT
ou
partiellement
PATCH
des
éléments
ou
les
effacer
DELETE
seront
souvent
également
disponibles
dans
l
API
Les
technologies
concurrentes
à
REST
sont
XML
RPC
et
SOAP
Microsoft
REST
est
une
façon
moderne
de
concevoir
ce
genre
de
service
et
possède
les
avantages
suivants
—
Bonne
montée
en
charge
du
serveur
—
Simplicité
des
serveurs
retour
aux
sources
du
protocole
HTTP
—
Equilibrage
de
charge
—
le
serveur
offre
une
API
—
les
services
sont
représentés
par
des
URL
s
donc
simplicité
et
bonne
gestion
du
cache
—
Possibilité
de
décomposer
des
services
complexes
en
de
multiples
services
plus
simples
qui
communiquent
entre
eux
Les
principes
de
REST
ont
été
théorisés
par
Roy
Fielding
dans
sa
thèse
http
www
ics
uci
edu
fielding
pubs
dissertation
rest
arch
style
htm
Séparation
claire
entre
Client
et
Serveur
Mettre
en
place
un
Web
Service
REST
Cours
PHP
Accéléré
Version
Le
client
contient
la
logique
métier
le
serveur
est
sans
Etat
Les
réponses
du
serveur
peuvent
ou
non
être
mises
en
cache
L
interface
doit
être
simple
bien
définie
standardisée
Le
système
peut
avoir
plusieurs
couches
comme
des
proxys
systèmes
de
cache
etc
Eventuellement
les
clients
peuvent
télecharger
du
code
du
serveur
qui
s
exécutera
dans
le
contexte
du
client
Pour
mémoire
une
API
REST
peut
offrir
les
méthodes
suivantes
Méthodes
HTTP
et
REST
Méthode
Rôle
Code
retour
HTTP
GET
URL
Récupération
Element
GET
URL
Récupération
Collection
POST
URL
Envoi
d
Elements
DELETE
URL
Effacer
Element
s
PUT
URL
Modifier
un
Element
PATCH
URL
Modif
partielle
d
Elt
Mais
on
peut
aussi
avoir
des
erreurs
comme
Code
Erreur
Description
Signification
Bad
Request
requête
mal
formée
Not
Found
Resource
demandée
inexistante
Unauthorized
Authentification
necessaire
pour
accéder
à
la
resource
Method
Not
Allowed
Méthode
interdite
pour
cette
resource
Conflict
Par
exemple
un
PUT
qui
crée
une
ressource
fois
Internal
Server
Error
Autres
erreurs
du
serveur
Par
ailleurs
le
serveur
REST
ne
maintient
pas
d
état
les
requêtes
sont
indépendantes
les
unes
des
autres
C
est
un
retour
aux
fondamentaux
du
protocole
HTTP
qui
n
est
pas
doté
de
beaucoup
de
capacités
de
mémorisation
La
logique
et
l
ergonomie
de
l
application
sont
gérées
côté
client
C
est
une
méthode
aujourd
hui
plebiscitée
pour
faire
dialoguer
des
clients
mobiles
ou
Web
avec
des
serveurs
Exemple
de
service
REST
avec
PHP
Problème
Nous
allons
réaliser
en
PHP
l
implémentation
d
un
service
REST
qui
exposera
les
données
de
la
table
de
contact
appellée
CARNET
utilisée
dans
les
autres
exemples
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Un
contact
sera
ainsi
ainsi
accessible
à
une
route
du
type
api
v
contact
qui
permettra
aux
clients
de
récupérer
le
contact
en
JSON
employant
la
méthode
HTTP
GET
dans
la
version
de
notre
API
Dans
cet
exemple
le
contact
constitue
la
ressource
manipulée
dans
notre
API
La
méthode
GET
sera
employée
pour
récupérer
des
éléments
individuellement
ou
par
Collections
Méthode
Action
réalisée
URI
GET
Récup
tous
les
liens
api
v
GET
Récuperation
un
Element
api
v
contact
id
GET
Récupération
Collection
api
v
contact
POST
Creation
d
Elements
api
v
contact
DELETE
Effacer
Element
api
v
contact
id
PUT
Modifier
un
Element
api
v
contact
id
PATCH
Modif
partielle
d
Elt
api
v
contact
id
La
route
api
v
en
GET
renverra
la
liste
des
URLs
des
contacts
plutôt
que
la
liste
de
tous
les
contacts
avec
tous
leurs
détails
Ceci
permet
d
avoir
un
serveur
REST
auto
documenté
où
la
récupération
d
une
première
URL
permet
en
suivant
d
obtenir
la
liste
des
ressources
présentes
sur
le
service
avec
leurs
URLs
respectives
On
pourra
également
paginer
les
réponses
pour
ne
pas
manipuler
trop
de
données
simultané
ment
Pour
assurer
le
routage
simplement
nous
allons
continuer
avec
Silex
http
silex
sensiolabs
org
Nous
pouvons
donc
modifier
le
fichier
index
php
déjà
mis
en
place
comme
suit
php
require
once
DIR
vendor
autoload
php
require
once
modele
php
app
new
Silex
Application
app
debug
true
app
get
contact
function
content
ul
amis
get
all
friends
foreach
amis
as
ami
content
li
ami
NOM
li
content
ul
return
content
app
get
api
function
amis
get
all
friends
links
return
json
encode
amis
app
get
api
contact
function
suite
sur
la
page
suivante
Exemple
de
service
REST
avec
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
amis
get
all
friends
return
json
encode
amis
avec
une
nouvelle
méthode
dans
modele
php
php
function
get
all
friends
links
connexion
connect
db
amis
Array
sql
SELECT
from
CARNET
data
connexion
query
sql
while
pers
data
fetch
PDO
FETCH
ASSOC
res
Array
res
NOM
pers
NOM
res
URL
SERVER
REQUEST
SCHEME
SERVER
HTTP
HOST
SERVER
CONTEXT
PREFIX
silex
api
contact
pers
ID
amis
res
return
amis
Indication
La
vue
de
base
de
notre
API
renvoie
maintenant
la
liste
des
liens
de
nos
contacts
et
quelqu
un
qui
s
y
connecte
pourra
décrouvrir
par
la
d
autres
URLs
gérées
par
notre
API
Une
bonne
API
REST
se
doit
d
être
autodocumentée
dans
la
mesure
du
possible
Puis
assurons
le
GET
sur
l
URI
api
contact
id
en
ajoutant
à
index
php
php
app
get
api
contact
id
function
id
use
app
ami
get
friend
by
id
id
if
ami
app
abort
Contact
inexistant
else
return
json
encode
ami
JSON
PRETTY
PRINT
qui
marchera
si
on
ajoute
la
nouvelle
méthode
get
friend
by
id
au
modèle
php
function
get
friend
by
id
id
suite
sur
la
page
suivante
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
connexion
connect
db
sql
SELECT
from
CARNET
where
ID
id
stmt
connexion
prepare
sql
stmt
bindParam
id
id
PDO
PARAM
INT
stmt
execute
return
stmt
fetch
PDO
FETCH
OBJ
Continuons
avec
la
méthode
http
DELETE
sur
la
même
route
en
ajoutant
à
index
php
php
app
delete
api
contact
id
function
id
use
app
ami
get
friend
by
id
id
if
ami
app
abort
Contact
inexistant
else
delete
friend
by
id
id
return
json
encode
ami
JSON
PRETTY
PRINT
en
ajoutant
au
modèle
php
function
delete
friend
by
id
id
connexion
connect
db
sql
Delete
from
CARNET
where
ID
id
stmt
connexion
prepare
sql
stmt
bindParam
id
id
PDO
PARAM
INT
stmt
execute
return
stmt
fetch
PDO
FETCH
OBJ
Enfin
le
POST
doit
nous
permettre
d
envoyer
un
nouveau
contact
pour
peupler
la
table
CARNET
sur
la
route
api
contact
Nous
assurons
d
abord
la
récupération
du
contenu
json
sous
la
forme
d
un
tableau
PHP
avec
la
méthode
before
de
Silex
php
app
before
function
Request
request
if
strpos
request
headers
get
Content
Type
application
json
data
json
decode
request
getContent
true
request
request
replace
is
array
data
data
array
suite
sur
la
page
suivante
Exemple
de
service
REST
avec
PHP
Cours
PHP
Accéléré
Version
suite
de
la
page
précédente
Puis
la
méthode
post
proprement
dite
php
app
post
api
contact
function
Request
request
use
app
data
request
request
all
add
friends
data
return
new
Response
json
encode
data
array
Content
Type
application
json
N
oubliez
pas
de
faire
appel
aux
objets
Request
et
Response
au
début
du
fichier
index
php
php
use
Symfony
Component
HttpFoundation
Request
use
Symfony
Component
HttpFoundation
Response
Il
ne
reste
plus
qu
à
ajouter
au
modèle
php
function
add
friends
data
connexion
connect
db
sql
INSERT
INTO
CARNET
NOM
PRENOM
NAISSANCE
VILLE
values
stmt
connexion
prepare
sql
return
stmt
execute
array
data
NOM
data
PRENOM
data
NAISSANCE
data
VILLE
Il
n
y
a
plus
qu
à
implémenter
un
PUT
et
surtout
à
Tester
Tester
une
API
REST
avec
votre
navigateur
ou
avec
curl
Pour
tester
notre
API
nous
pouvons
dans
un
premier
temps
utiliser
l
extension
Postman
de
Chrome
ou
l
extension
RESTClient
pour
Firefox
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Avertissement
Attention
à
bien
désactiver
les
proxys
dans
vos
navigateurs
si
vous
voulez
utiliser
ces
extensions
Pour
chrome
on
peut
le
lancer
en
ligne
de
commande
avec
l
option
no
proxy
server
Si
on
veut
une
solution
en
ligne
de
commande
curl
permet
de
manipuler
les
différentes
mé
thodes
HTTP
La
syntaxe
n
est
pas
idéale
mais
on
peut
tester
toutes
les
méthodes
HTTP
Avertissement
Si
vous
avez
déclaré
des
variables
d
environnement
http
proxy
ou
https
proxy
il
vaut
mieux
les
désactiver
pour
que
curl
n
essaie
pas
de
passer
par
un
proxy
ce
qui
serait
problématique
pour
certaines
de
ces
requêtes
curl
unset
http
proxy
unset
https
proxy
Pour
tester
un
GET
curl
i
http
localhost
silex
api
v
contact
ou
si
on
utilise
le
module
user
dir
d
Apache
curl
i
http
localhost
login
silex
api
v
contact
Avertissement
Attention
dans
le
cas
ou
on
utilise
user
dir
les
réglages
pour
utiliser
toutes
les
methodes
du
protocole
HTTP
peuvent
s
avérer
délicats
Notamment
le
fichier
etc
apache
mods
available
userdir
conf
doit
être
modifié
comme
suit
les
user
dir
sont
dans
www
syntaxe
pour
Apache
IfModule
mod
userdir
c
UserDir
www
UserDir
disabled
root
Directory
home
www
AllowOverride
All
Options
MultiViews
Indexes
SymLinksIfOwnerMatch
Limit
GET
POST
PUT
DELETE
OPTIONS
Require
all
granted
Limit
LimitExcept
GET
POST
PUT
DELETE
OPTIONS
Require
all
denied
LimitExcept
Directory
IfModule
Tester
une
API
REST
avec
votre
navigateur
ou
avec
curl
Cours
PHP
Accéléré
Version
et
il
faut
aussi
dans
votre
dossier
sous
voter
user
dir
par
exemple
www
silex
avoir
le
htaccess
suivant
Limit
GET
POST
DELETE
PUT
OPTIONS
allow
from
all
Limit
FallbackResource
roza
silex
index
php
RewriteBase
roza
silex
Dans
tous
les
cas
préciser
si
besoin
dans
votre
php
ini
ou
un
fichier
équivalent
always
populate
raw
post
data
Pour
tester
un
POST
curl
i
H
Content
Type
application
json
X
POST
d
NOM
Dalton
PRENOM
joe
NAISSANCE
VILLE
Orleans
http
localhost
silex
api
contact
Test
un
PUT
curl
i
H
Content
Type
application
json
X
PUT
d
done
true
http
localhost
silex
api
contact
Test
de
DELETE
curl
i
H
Content
Type
application
json
X
DELETE
http
localhost
silex
api
contact
Tester
une
API
Tester
une
API
avec
Postman
C
est
le
moyen
le
plus
simple
pour
tester
une
API
On
l
installe
en
téléchargeant
l
App
de
Postman
https
www
getpostman
com
apps
pour
votre
OS
On
peut
alors
se
constituer
des
collections
de
requêtes
HTTP
pour
tester
une
API
REST
spécifique
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Tester
une
API
REST
avec
Guzzle
Les
tests
de
notre
API
REST
avec
curl
sont
peu
lisibles
Si
vous
préférez
disposer
d
une
batterie
de
tests
en
PHP
vous
pouvez
utiliser
une
librairie
spécialisée
comme
Guzzle
On
peut
installer
cette
dernière
avec
composer
composer
require
guzzlehttp
guzzle
Feuilles
de
TD
Lic
Pro
Web
et
Mobile
Année
—
TD
—
TD
—
TD
Feuilles
de
TD
ème
Année
IUT
informatique
Année
—
TD
—
TP
—
TD
—
TP
—
TP
—
TD
—
Git
init
Feuilles
de
TD
Lic
Pro
Web
et
Mobile
Année
—
TD
—
TD
—
TD
—
TD
—
TD
—
TD
—
TD
Feuilles
de
TD
Lic
Pro
Web
et
Mobile
Cours
PHP
Accéléré
Version
Feuilles
de
TD
CVRH
Tours
Formation
de
Juin
—
TD
—
TD
—
TD
Alice
démarre
avec
git
Paramétrage
et
initialisations
On
configure
d
abord
ses
paramètres
git
config
global
user
name
Alice
Torvalds
git
config
global
user
email
alice
kernel
org
Création
d
un
dossier
local
versionné
mkdir
monprojet
cd
monprojet
git
init
Si
vous
avez
déja
du
contenu
git
add
Création
d
un
dépot
monprojet
sur
gitlab
—
Privé
—
Public
—
ou
Interne
à
gitlab
Bitbucket
https
bitbucket
org
offre
également
la
possibilité
d
avoir
des
dépôts
privés
de
taille
limitée
Github
https
github
com
offre
les
dépôts
public
et
fait
payer
les
dépôts
privés
Connexion
entre
le
local
et
le
gitlab
Eventuellement
git
config
push
default
simple
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
git
remote
add
origin
https
gitlab
com
alice
monprojet
git
git
push
u
origin
master
ou
simplement
git
push
par
la
suite
Réalisation
d
une
fonctionnalité
par
Alice
—
Alice
prend
une
chose
à
réaliser
et
implémente
le
code
nécessaire
—
Alice
fait
les
tests
et
vérifie
que
ça
marche
—
git
commit
am
Message
de
commit
Alice
pousse
son
master
sur
son
remote
git
push
u
origin
master
Bob
travaille
avec
Alice
grâce
à
git
Bob
fait
d
abord
comme
Alice
pour
paramétrer
et
initialiser
son
dépôt
local
Bob
vérifie
qu
il
a
bien
remotes
—
Le
sien
origin
qu
il
crée
au
besoin
en
faisant
git
remote
add
origin
https
gitlab
com
bob
monprojet
git
—
celui
d
Alice
qu
il
ajoute
git
remote
add
alice
https
gitlab
com
alice
monprojet
git
—
il
tape
git
remote
v
pour
vérifier
ses
remotes
—
Si
il
se
trompe
git
remote
remove
alice
Bob
récupère
le
master
d
Alice
git
fetch
Alice
master
Bob
travaille
avec
Alice
grâce
à
git
Cours
PHP
Accéléré
Version
Bob
consulte
la
branche
locale
correspondant
au
master
d
Alice
git
branch
av
git
checkout
Alice
master
puis
vérifie
que
le
code
d
Alice
est
correct
Bob
revient
dans
son
master
git
checkout
master
Bob
merge
le
travail
d
Alice
et
pousse
les
modifs
dans
son
dépôt
distant
git
merge
Alice
master
git
push
Puis
detruit
la
branche
locale
d
Alice
git
branch
d
Alice
master
Alice
se
met
à
jour
—
ajoute
le
remote
de
Bob
—
fetche
le
master
de
Bob
pour
se
mettre
à
jour
git
fetch
Bob
master
—
Fusionne
git
merge
Bob
master
Alice
travaille
sur
une
branche
git
Alice
doit
par
exemple
intégrer
une
feature
de
connexion
à
une
base
de
données
Elle
va
pour
cela
créer
une
branche
bd
dédiée
à
la
réalisation
de
cette
feature
et
se
placer
dedans
Chapitre
Tables
des
matières
Cours
PHP
Accéléré
Version
Création
et
choix
de
la
branche
git
checkout
b
bd
Elle
fait
ensuite
son
travail
le
teste
puis
git
commit
am
Intégration
BD
Alice
pousse
sa
branche
sur
son
remote
git
push
origin
bd
Bob
et
la
branche
d
Alice
Bob
récupère
la
branche
d
Alice
git
fetch
Alice
bd
Bob
consulte
la
branche
d
Alice
S
il
le
souhaite
Bob
consulte
la
liste
des
branches
disponibles
puis
se
place
dans
la
branche
d
Alice
pour
faire
une
petite
revue
du
code
de
sa
collaboratrice
git
branch
av
git
checkout
Alice
bd
Bob
revient
dans
sa
branche
master
git
checkout
master
Bob
merge
la
branche
d
Alice
et
pousse
les
modifs
git
merge
Alice
bd
git
push
Bob
et
la
branche
d
Alice
Cours
PHP
Accéléré
Version
Alice
récupère
la
dernière
version
du
master
Alice
fetche
le
master
de
Bob
pour
se
mettre
à
jour
git
fetch
Bob
master
git
merge
Bob
master
Alice
efface
sa
branche
bd
git
branch
d
bd
Chapitre
Tables
des
matières
CHAPITRE
GIT
Tout
bon
développeur
doit
aujourd
hui
savoir
utiliser
un
système
de
gestion
de
version
pour
son
code
et
pour
collaborer
Git
est
aujourd
hui
le
plus
répandu
Vous
trouverez
à
la
fin
de
ce
cours
un
rappel
des
principales
commandes
git
pour
démarrer
GIT
start
et
quelques
commandes
pour
travailler
à
plusieurs
sur
un
projet
avec
les
branches
git
GIT
branches
Cours
PHP
Accéléré
Version
Chapitre
GIT
CHAPITRE
Références
—
Manuel
PHP
http
php
net
manual
fr
—
intro
JS
https
www
univ
orleans
fr
iut
orleans
informatique
intra
tuto
js
initiation
slides
html
le
langage
javascript
—
compléments
JS
https
www
univ
orleans
fr
iut
orleans
informatique
intra
tuto
js
initiation
slides
html
versions
de
javascript
Cours
PHP
Accéléré
Version
Chapitre
Références
CHAPITRE
Index
et
recherche
—
genindex
—
search
Cours
PHP
Accéléré
Version
Chapitre
Index
et
recherche
Index
Symbols
csrf
CURL
cvrh
GET
D
GLOBALS
POST
DataBase
SERVER
DB
define
DELETE
eme
Année
directives
dirname
Numbers
DOM
E
echo
A
Ensembles
array
walk
equals
associatif
ereg
autoload
eregi
autoloader
eval
B
F
Bases
Filtrage
BD
filtrage
bundles
foreach
formulaire
C
G
caché
chaine
génération
clefs
GET
Collections
gettype
composer
GUMP
concaténation
GUZZLE
constructeur
H
controleur
Cookies
hidden
Cours
PHP
Accéléré
Version
HTTP
PHPUnit
Http
Piles
HttpFoundation
portée
POST
I
PreparedStatement
imbrication
print
include
print
r
include
once
PUT
injection
SQL
Q
installation
interpréteur
Queue
is
array
R
is
double
is
int
recherche
is
long
request
is
string
require
IUT
require
once
response
L
REST
Lamp
route
Lerdorf
routes
licence
professionnelle
S
M
sécurité
méthodes
SAX
magic
quotes
sessions
Mamp
Set
modele
settype
mvc
SimpleXML
MySQL
sort
SQL
N
Stack
Namespace
string
stristr
O
strlen
Objets
strstr
OPTIONS
suppression
Orleans
symfony
P
T
Pair
tableau
PATCH
td
PDO
TDD
persistante
template
PHP
test
php
ini
TESTS
PHP
tests
PHP
time
phpinfo
timestamp
Index
Cours
PHP
Accéléré
Version
toString
Tours
transactions
twig
type
U
URL
user
agent
useragent
V
valeurs
validation
variables
variables
PHP
vue
W
Wamp
Web
X
Xampp
XML
XMLReader
XMLWriter
Z
Zend
Index
Document
Outline
Ce
cours
au
format
epub
Ce
cours
au
format
pdf
Tables
des
matières
Caractéristiques
Principales
Fonctionnement
Historique
Installation
PHP
Configuration
PHP
Exemples
simples
Imbrication
de
code
HTML
et
PHP
Un
formulaire
HTML
et
sa
réponse
en
PHP
Les
variables
en
PHP
Les
chaînes
en
PHP
Le
typage
en
PHP
Quelques
particularités
de
PHP
Les
tableaux
en
PHP
Les
tableaux
prédéfinis
de
PHP
L
inclusion
de
fichiers
externes
Les
Objets
en
PHP
Les
collections
en
PHP
Connexion
aux
bases
de
données
depuis
PHP
Requêtes
préparées
en
PHP
Compléments
sur
PDO
Sécurité
Filtrage
en
PHP
Gestion
des
transactions
avec
PDO
Connexion
persistante
avec
PDO
Validation
et
contrôle
d
entrées
avec
GUMP
Http
et
la
conservation
d
informations
sur
les
clients
Manipuler
XML
avec
PHP
Architecture
de
type
MVC
avec
PHP
Templates
Twig
en
PHP
Composer
Symfony
et
Flex
Tester
une
application
PHP
TDD
Mettre
en
place
un
Web
Service
REST
Exemple
de
service
REST
avec
PHP
Tester
une
API
REST
avec
votre
navigateur
ou
avec
curl
Tester
une
API
Feuilles
de
TD
Lic
Pro
Web
et
Mobile
Feuilles
de
TD
ème
Année
IUT
informatique
Feuilles
de
TD
Lic
Pro
Web
et
Mobile
Feuilles
de
TD
CVRH
Tours
Alice
démarre
avec
git
Bob
travaille
avec
Alice
grâce
à
git
Alice
se
met
à
jour
Alice
travaille
sur
une
branche
git
Bob
et
la
branche
d
Alice
Alice
récupère
la
dernière
version
du
master
GIT
Références
Index
et
recherche
Index
