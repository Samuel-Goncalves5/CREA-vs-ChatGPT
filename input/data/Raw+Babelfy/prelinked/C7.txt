M2105
Web
Dynamique
M2105
Généralités
Langage
PHP
Variables
comment
concevoir
Condit°/Boucles
sites
dynamiques
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
Cathy.Escazut
unice.fr
Généralités
1
●
PHP
Hypertext
Processor
–
Langage
créé
1994
R.
Lerdorf
puis
repris
1997
M2105
2
étudiants
A.
Gutmanz
&
Z.
Suraski
–
Logiciel
libre
multi-plateforme
Généralités
–
Principalement
utilisé
conception
sites
Web
Variables
dynamiques
Condit°/Boucles
●
Traitement
formulaires
Tableaux
●
Accès
bases
données
Fonctions
●
…
Formulaires
–
Langage
orienté
objet
peu
typé
Super
Globales
Sessions
–
Syntaxe
proche
Java
…
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
2
/
37
Généralités
2
●
Code
PHP
sites
WEB
–
Intégré
code
HTML
fichier
M2105
.php
php
…
–
Exécuté
serveur
Généralités
–
Objectif
générer
code
HTML
lu
Variables
navigateurs
Condit°/Boucles
Requête
client
.php
demandé
Tableaux
http
//www
…
.php
Serveur
Fonctions
WEB
Client
Formulaires
WEB
Super
Globales
Sessions
Réponse
serveur
.html
envoyé
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
3
/
37
Généralités
3
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex1.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
4
/
37
Variables
1
●
Durée
vie
temps
production
HTML
M2105
●
Nom
commence
toujours
●
Distinction
entre
minuscules
majuscules
Généralités
Variables
●
Déclaration
inutile
Condit°/Boucles
●
Fonctions
très
utiles
Tableaux
–
isset
nomVar
retourne
TRUE
nomVar
Fonctions
définie
FALSE
sinon
Formulaires
–
empty
nomVar
retourne
TRUE
nomVar
Super
Globales
nulle
vide
non
définie
FALSE
sinon
Sessions
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
5
/
37
Variables
2
●
Affectation
=
–
Numérique
M2105
age=20+
x
–
Chaîne
nom=
Monsieur
–
Booléen
marie=TRUE
Généralités
●
Variables
Comparaison
==
=
=
=
Condit°/Boucles
Tableaux
●
Afficher
contenu
d'une
variable
Fonctions
echo
nom
echo
``
{
nom
}
j'ai
{
age
}
ans
Formulaires
echo
'Je
'.
nom
'
j'ai
'.
age
'ans
'
Super
Globales
●
Caractères
dé-spécialisation
\
Sessions
echo
``
\
\
\\
``
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
6
/
37
Variables
5
●
2
façons
passer
valeurs
d'une
page
l'autre
–
Utiliser
l'URL
page
M2105
http
//www.truc.fr/page.php
nom=Moi
&
age=20
fichier
page.php
récupèrera
Généralités
_GET
'
nom
'
valeur
Variables
_GET
'
age
'
valeur
20
Condit°/Boucles
Tableaux
●
valeurs
passées
méthode
GET
Fonctions
●
passer
valeurs
sensibles
méthode
Formulaires
GET
car
elles
visibles
l'URL
Super
Globales
Sessions
–
Utiliser
formulaire
cf
partie
formulaires
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
7
/
37
Structures
conditionnelles
●
Structure
base
M2105
if
condition
{
instructions_if
}
Opérateurs
logiques
else
{
//
Facultatif
&
&
||
Généralités
instructions_else
}
Variables
Condit°/Boucles
●
Structure
choix
multiple
Tableaux
switch
nomVar
{
Fonctions
case
val1
Formulaires
instructions1
case
val2
Penser
break
Super
Globales
instructions2
sortir
d'un
block
…
Sessions
default
//
Facultatif
instructions
Cookies
}
Web
dynamique
–
Langage
Php
Cathy
Escazut
8
/
37
Structures
itératives
●
Structure
while
M2105
while
condition
{
instructions
}
Généralités
Variables
Condit°/Boucles
●
Structure
for
Tableaux
for
init
condition
incr
{
Fonctions
instructions
Formulaires
}
Super
Globales
Sessions
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
9
/
37
Tableaux
1
●
Tableaux
séquentiels
M2105
–
Indices
entiers
indice
1ère
case
=
0
–
Exemples
0
=
france
1
=
italie
t=array
``
france
``
italie
Généralités
–
Ajout
d'une
valeur
dernière
case
tableau
Variables
nomTab
=
val
Condit°/Boucles
–
Taille
d'un
tableau
count
nomTab
Tableaux
–
Parcours
d'un
tableau
Fonctions
●
Utilisation
d'un
for
…
●
Formulaires
Utilisation
d'un
foreach
Super
Globales
foreach
nomTableau
nomVar
{
instructions
Sessions
}
Cookies
nomVar
va
prendre
toutes
valeurs
nomTableau
exécuter
instructions
Web
dynamique
–
Langage
Php
Cathy
Escazut
10
/
37
Tableaux
2
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex2.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
11
/
37
Tableaux
3
●
Tableaux
associatifs
M2105
–
Indices
chaînes
caractères
–
Couples
clé
=
valeur
Généralités
–
Clés
=
valeurs
uniques
Variables
–
Exemples
'fr
'
=
france
'it
'
=
italie
Condit°/Boucles
t=array
'fr'=
france
'it'=
italie
Tableaux
–
Taille
d'un
tableau
count
nomTab
Fonctions
–
Parcours
d'un
tableau
Formulaires
foreach
nomTableau
cle
=
val
{
Super
Globales
instructions
Sessions
}
Cookies
–
Autres
tableaux
associatifs
_GET
_POST
…
Web
dynamique
–
Langage
Php
Cathy
Escazut
12
/
37
Tableaux
4
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex3.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
13
/
37
Tableaux
5
●
Affichage
informations
concernant
tableau
déboggage
M2105
print_r
nomTableau
–
mettre
balises
pre
/pre
Généralités
–
Peut-être
utilisé
n'importe
quelle
variable
Variables
●
Tri
d'un
tableau
séquentiel
Condit°/Boucles
sort
nomTableau
//
croissant
Tableaux
rsort
nomTableau
//
décroissant
Fonctions
●
Tri
d'un
tableau
associatif
Formulaires
ksort
nomTableau
//
croissant
clé
Super
Globales
krsort
nomTableau
//
décroissant
clé
Sessions
asort
nomTableau
//
croissant
valeur
Cookies
arsort
nomTableau
//
décroissant
valeur
Web
dynamique
–
Langage
Php
Cathy
Escazut
14
/
37
Tableaux
4
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex4.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
15
/
37
Fonctions
1
●
Écriture
d'une
fonction
M2105
function
nomFct
listeParam
{
instructions
return
varResultat
//
Facultatif
}
Généralités
Variables
●
Appel
d'une
fonction
retourne
rien
Condit°/Boucles
nomFct
listeParam
Tableaux
Fonctions
●
Appel
d'une
fonction
retourne
résultat
Formulaires
Super
Globales
nomVar
=
nomFct
listeParam
Sessions
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
16
/
37
Fonctions
2
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex5.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
17
/
37
Fonctions
3
●
Variables
locales
–
Variables
apparaissent
1ère
fois
M2105
fonction
–
Connues
utilisables
uniquement
fonction
Généralités
●
Variables
globales
Variables
–
Variables
initialisées
hors
toute
fonction
Condit°/Boucles
–
Connues
utilisables
toutes
fonctions
Tableaux
–
Valeurs
stockées
tableau
associatif
GLOBALS
Fonctions
cf
partie
variables
super
globales
Formulaires
●
Clé
=
nom
variable
globale
Super
Globales
●
Valeur
=
valeur
variable
globale
Sessions
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
18
/
37
Fonctions
4
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex6.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
19
/
37
Fonctions
5
●
fonction
include
–
Permet
d'inclure
contenu
d'un
fichier
M2105
.php
–
Très
utile
●
Structuration
toutes
pages
d'un
site
Généralités
●
Déclaration
fonctions
variables
globales
…
Variables
–
Syntaxe
Condit°/Boucles
include
nomFic.php
Tableaux
Fonctions
●
nom
fichier
chaîne
caractères
doit
être
entre
guillemets
Formulaires
●
contenu
nomFic.php
inséré
place
Super
Globales
l'instruction
include
Sessions
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
20
/
37
Fonctions
6
●
fonction
header
–
Permet
rediriger
vers
autre
page
M2105
–
Utilise
en-têtes
HTTP
fonction
doit
être
appelée
tout
début
Généralités
–
Syntaxe
Variables
header
'Location
nomFic.php
'
Condit°/Boucles
exit
Tableaux
–
oublier
mettre
exit
Fonctions
–
nom
fichier
nomFic.php
peut-être
●
Formulaires
chemin
relatif
●
Super
Globales
chemin
absolu
●
URL
éventuellement
passage
Sessions
paramètres
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
21
/
37
Fonctions
7
●
Quelques
fonctions
utiles
chaînes
–
strlen
uneCh
M2105
retourne
longueur
chaîne
passée
paramètre
–
str_replace
quoi
uneCh
retourne
chaîne
toutes
occurrences
quoi
Généralités
uneCh
remplacées
Variables
–
strtolower
uneCh
/strtoupper
uneCh
retourne
chaîne
toutes
caractère
uneCh
Condit°/Boucles
mis
minuscules/majuscules
Tableaux
–
explode
sep
uneCh
explose
Fonctions
uneCh
fonction
sep
range
chaque
morceau
tableau
retourné
Formulaires
–
htmlent
ities
uneCh
Super
Globales
retourne
chaîne
laquelle
certains
caractères
uneCh
transformés
HTML
ex
&
=
&
amp
Sessions
–
toutes
autres
fonctions
chaînes
référencées
Cookies
http
//fr2.php.net/manual/fr/ref.strings.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
22
/
37
Fonctions
8
●
Manipulation
dates
–
Dates
manipulées
sous
forme
timestamp
=
nombre
M2105
secondes
écoulées
depuis
01/01/1970
–
Fonction
time
retourne
timestamp
correspondant
date/heure
Généralités
courante
Variables
–
Fonction
mkt
ime
h
min
retourne
timestamp
correspondant
date
spécifiée
Condit°/Boucles
paramètre
Tableaux
–
Fonction
date
format
timestamp
Fonctions
retourne
chaîne
correspondant
timestamp
mis
forme
suivant
format
utilise
entre
autres
Formulaires
secondes
i
minutes
H
heure
Super
Globales
jour
mois
année
Sessions
–
toutes
autres
fonctions
dates
référencées
http
//fr2.php.net/manual/fr/ref.datetime.php
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
23
/
37
Fonctions
9
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex7.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
24
/
37
Formulaires
1
RAPPELS
●
Informations
saisies
formulaire
HTML
envoyées
script
Php
2
fichiers
M2105
fichier
.html
php
contenant
moins
code
HTML
formulaire
Généralités
fichier
.php
traitement
informations
provenance
formulaire
Variables
●
Condit°/Boucles
Code
HTML
Tableaux
form
method='post
'
action='script.php
'
p
Fonctions
Ici
champs
formulaire
/p
Formulaires
/form
Super
Globales
faut
obligatoirement
champ
button
type
submit
Sessions
●
script
script.php
récupèrera
données
Cookies
tableau
_POST
Web
dynamique
–
Langage
Php
Cathy
Escazut
25
/
37
Formulaires
2
Fichier
HTML
contenant
formulaire
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
26
/
37
Formulaires
3
Fichier
PHP
traiter
données
formulaire
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex8.html
Web
dynamique
–
Langage
Php
Cathy
Escazut
27
/
37
Variables
Super-Globales
1
●
Variables
super-globales
–
Variables
créées
automatiquement
PHP
M2105
chargement
d'une
page
.php
–
Connues
accessibles
toutes
pages
site
–
nom
commence
toujours
Généralités
_
écrit
majuscules
_GET
_POST
…
Variables
–
tableaux
associatifs
Condit°/Boucles
GLOBALS
toutes
variables
globales
Tableaux
_GET
passer
variables
l'URL
Fonctions
_POST
passer
variables
sans
passer
l'URL
Formulaires
_SERVER
récupère
informations
serveur
_ENV
toutes
variables
d'environnement
Super
Globales
_FILES
envoyer
fichiers
serveur
Sessions
_SESSION
partager
variables
tout
site
Cookies
_COOKIE
stocker
cookies
enregistrés
Web
dynamique
–
Langage
Php
Cathy
Escazut
28
/
37
Variables
Super-Globales
2
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex9.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
29
/
37
Variables
Super-Globales
3
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex10.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
30
/
37
Variables
session
1
●
Objectif
Faire
passer
variables
entre
certaines
pages
M2105
site
≈
variables
globales
●
Fonctionnement
Généralités
–
connexion
client
création
d'une
session
Variables
●
Attribution
d'un
identifiant
session
●
Condit°/Boucles
Création
tableau
associatif
_SESSION
Tableaux
–
différentes
pages
pourront
stocker
accéder
couples
clé
valeur
_SESSION
Fonctions
ex
_SESSION
'prenom
'
=
``
Cathy
Formulaires
Super
Globales
–
déconnexion
client
fermeture
session
●
_SESSION
détruit
Sessions
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
31
/
37
Variables
session
2
●
Création
d'une
session
session_start
–
Indique
tableau
M2105
_SESSION
peut
être
utilisé
script
–
mettre
tout
début
su
script
avant
tout
code
HTML
Généralités
●
Fermeture
session
session_destroy
Variables
–
Destruction
_SESSION
Condit°/Boucles
Tableaux
session_destroy
manquant
destruction
automatique
_SESSION
après
certain
temps
Fonctions
d'inactivité
fermeture
navigateur
Formulaires
Super
Globales
Sessions
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
32
/
37
Variables
session
3
Fichier
n°1
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex11-1.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
33
/
37
Variables
session
4
Fichier
n°2
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex11-2.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
34
/
37
Cookies
1
●
Cookie
fichier
texte
laissé
serveur
disque
dur
M2105
client
lequel
enregistrées
informations
visite
site
Généralités
●
Fonctionnement
–
Variables
Durée
vie
limitée
–
Pendant
durée
vie
valeurs
restent
entre
2
Condit°/Boucles
visites
site
contrairement
sessions
Tableaux
●
Fonctions
Mise
œuvre
setcookie
nom
val
mort
nom
val
nom
valeur
cookie
Formulaires
mort
nombre
secondes
avant
expiration
Super
Globales
–
Création
d'une
entrée
nom
val
tableau
Sessions
associatif
_COOKIE
Cookies
–
mettre
avant
tout
code
HTML
comme
sessions
Web
dynamique
–
Langage
Php
Cathy
Escazut
35
/
37
Cookies
2
●
Accéder
cookie
Accéder
tableau
_COOKIE
utilisant
nom
M2105
cookie
comme
clé
●
Exemple
Généralités
–
Création
cookie
id
Variables
setcookie
``
id
``
time
+365
*
24
*
3600
●
Condit°/Boucles
nom
id
●
Tableaux
valeur
●
durée
vie
365
*
24
*
3600
secondes
=
1an
Fonctions
–
Accès
valeur
cookie
id
_COOKIE
'id
'
Formulaires
●
Super
Globales
Attention
cookies
récupérés
màj
_COOKIE
qu'au
chargement
l'en-tête
HTTP
Sessions
Décalage
entre
l'écriture
d'un
cookie
utilisation
Cookies
Web
dynamique
–
Langage
Php
Cathy
Escazut
36
/
37
Cookies
3
M2105
Généralités
Variables
Condit°/Boucles
Tableaux
Fonctions
Formulaires
Super
Globales
Sessions
Cookies
http
//iutsa.unice.fr/~escazut/ext/M2105/Cours/Exemples/php_ex12.php
Web
dynamique
–
Langage
Php
Cathy
Escazut
37
/
37
Document
Outline
Diapo
1
Diapo
2
Diapo
3
Diapo
4
Diapo
5
Diapo
6
Diapo
7
Diapo
8
Diapo
9
Diapo
10
Diapo
11
Diapo
12
Diapo
13
Diapo
14
Diapo
15
Diapo
16
Diapo
17
Diapo
18
Diapo
19
Diapo
20
Diapo
21
Diapo
22
Diapo
23
Diapo
24
Diapo
25
Diapo
26
Diapo
27
Diapo
28
Diapo
29
Diapo
30
Diapo
31
Diapo
32
Diapo
33
Diapo
34
Diapo
35
Diapo
36
Diapo
37
